<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 Clasificación | Minería de datos con R</title>
  <meta name="description" content="Este libro esta destinado a la materia de Programación Estadística II de la carrera de Estadística de la Universidad Mayor de San Andres." />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="5 Clasificación | Minería de datos con R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Este libro esta destinado a la materia de Programación Estadística II de la carrera de Estadística de la Universidad Mayor de San Andres." />
  <meta name="github-repo" content="alvarolimber/est-384" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Clasificación | Minería de datos con R" />
  
  <meta name="twitter:description" content="Este libro esta destinado a la materia de Programación Estadística II de la carrera de Estadística de la Universidad Mayor de San Andres." />
  

<meta name="author" content="Alvaro Chirino Gutierrez" />


<meta name="date" content="2020-11-11" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="regresión.html"/>
<link rel="next" href="minería-de-texto.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Prefacio</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#audiencia"><i class="fa fa-check"></i>Audiencia</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#estructura-del-libro"><i class="fa fa-check"></i>Estructura del libro</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#software-y-acuerdos"><i class="fa fa-check"></i>Software y acuerdos</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#datos"><i class="fa fa-check"></i>Datos</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#agradecimiento"><i class="fa fa-check"></i>Agradecimiento</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="acerca-del-autor.html"><a href="acerca-del-autor.html"><i class="fa fa-check"></i>Acerca del autor</a><ul>
<li class="chapter" data-level="" data-path="acerca-del-autor.html"><a href="acerca-del-autor.html#bibliografía"><i class="fa fa-check"></i>Bibliografía</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="minería-de-datos.html"><a href="minería-de-datos.html"><i class="fa fa-check"></i><b>1</b> Minería de Datos</a><ul>
<li class="chapter" data-level="1.1" data-path="minería-de-datos.html"><a href="minería-de-datos.html#motivación-para-la-minería-de-datos"><i class="fa fa-check"></i><b>1.1</b> Motivación para la Minería de datos</a></li>
<li class="chapter" data-level="1.2" data-path="minería-de-datos.html"><a href="minería-de-datos.html#qué-es-la-minería-de-datos"><i class="fa fa-check"></i><b>1.2</b> ¿Qué es la minería de datos?</a></li>
<li class="chapter" data-level="1.3" data-path="minería-de-datos.html"><a href="minería-de-datos.html#datos-y-conocimiento"><i class="fa fa-check"></i><b>1.3</b> Datos y conocimiento</a><ul>
<li class="chapter" data-level="1.3.1" data-path="minería-de-datos.html"><a href="minería-de-datos.html#datos-1"><i class="fa fa-check"></i><b>1.3.1</b> Datos:</a></li>
<li class="chapter" data-level="1.3.2" data-path="minería-de-datos.html"><a href="minería-de-datos.html#conocimiento"><i class="fa fa-check"></i><b>1.3.2</b> Conocimiento:</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="minería-de-datos.html"><a href="minería-de-datos.html#requerimientos"><i class="fa fa-check"></i><b>1.4</b> Requerimientos</a></li>
<li class="chapter" data-level="1.5" data-path="minería-de-datos.html"><a href="minería-de-datos.html#knowledge-discovery-in-databases-kdd"><i class="fa fa-check"></i><b>1.5</b> knowledge discovery in databases (KDD)</a></li>
<li class="chapter" data-level="1.6" data-path="minería-de-datos.html"><a href="minería-de-datos.html#preparación-de-los-datos"><i class="fa fa-check"></i><b>1.6</b> Preparación de los datos</a><ul>
<li class="chapter" data-level="1.6.1" data-path="minería-de-datos.html"><a href="minería-de-datos.html#recopilación"><i class="fa fa-check"></i><b>1.6.1</b> Recopilación</a></li>
<li class="chapter" data-level="1.6.2" data-path="minería-de-datos.html"><a href="minería-de-datos.html#data-warehouse"><i class="fa fa-check"></i><b>1.6.2</b> Data Warehouse</a></li>
<li class="chapter" data-level="1.6.3" data-path="minería-de-datos.html"><a href="minería-de-datos.html#data-warehouse-in-r"><i class="fa fa-check"></i><b>1.6.3</b> Data Warehouse in R</a></li>
<li class="chapter" data-level="1.6.4" data-path="minería-de-datos.html"><a href="minería-de-datos.html#importación"><i class="fa fa-check"></i><b>1.6.4</b> Importación</a></li>
<li class="chapter" data-level="1.6.5" data-path="minería-de-datos.html"><a href="minería-de-datos.html#recopilación-1"><i class="fa fa-check"></i><b>1.6.5</b> Recopilación</a></li>
<li class="chapter" data-level="1.6.6" data-path="minería-de-datos.html"><a href="minería-de-datos.html#limpieza"><i class="fa fa-check"></i><b>1.6.6</b> Limpieza</a></li>
<li class="chapter" data-level="1.6.7" data-path="minería-de-datos.html"><a href="minería-de-datos.html#ejercicio-reshape"><i class="fa fa-check"></i><b>1.6.7</b> Ejercicio (reshape)</a></li>
<li class="chapter" data-level="1.6.8" data-path="minería-de-datos.html"><a href="minería-de-datos.html#limpieza-fechas"><i class="fa fa-check"></i><b>1.6.8</b> Limpieza (fechas)</a></li>
<li class="chapter" data-level="1.6.9" data-path="minería-de-datos.html"><a href="minería-de-datos.html#limpieza-string"><i class="fa fa-check"></i><b>1.6.9</b> Limpieza (String)</a></li>
<li class="chapter" data-level="1.6.10" data-path="minería-de-datos.html"><a href="minería-de-datos.html#transformación"><i class="fa fa-check"></i><b>1.6.10</b> Transformación</a></li>
<li class="chapter" data-level="1.6.11" data-path="minería-de-datos.html"><a href="minería-de-datos.html#definir-diseño-de-encuesta-por-muestreo"><i class="fa fa-check"></i><b>1.6.11</b> Definir diseño de encuesta por muestreo</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="minería-de-datos.html"><a href="minería-de-datos.html#imputación-de-variables"><i class="fa fa-check"></i><b>1.7</b> Imputación de variables</a><ul>
<li class="chapter" data-level="1.7.1" data-path="minería-de-datos.html"><a href="minería-de-datos.html#la-falta-de-información-es-información"><i class="fa fa-check"></i><b>1.7.1</b> La falta de información es información</a></li>
<li class="chapter" data-level="1.7.2" data-path="minería-de-datos.html"><a href="minería-de-datos.html#aproximación-formal"><i class="fa fa-check"></i><b>1.7.2</b> Aproximación formal</a></li>
<li class="chapter" data-level="1.7.3" data-path="minería-de-datos.html"><a href="minería-de-datos.html#mcar-mar-mnar"><i class="fa fa-check"></i><b>1.7.3</b> MCAR, MAR, MNAR</a></li>
<li class="chapter" data-level="1.7.4" data-path="minería-de-datos.html"><a href="minería-de-datos.html#alternativas-para-trabajar-con-los-missings-ad-hoc"><i class="fa fa-check"></i><b>1.7.4</b> Alternativas para trabajar con los Missings (Ad-hoc)</a></li>
<li class="chapter" data-level="1.7.5" data-path="minería-de-datos.html"><a href="minería-de-datos.html#imputación-multiple"><i class="fa fa-check"></i><b>1.7.5</b> Imputación Multiple</a></li>
<li class="chapter" data-level="1.7.6" data-path="minería-de-datos.html"><a href="minería-de-datos.html#patrones-en-datos-multivariados"><i class="fa fa-check"></i><b>1.7.6</b> Patrones en datos multivariados</a></li>
<li class="chapter" data-level="1.7.7" data-path="minería-de-datos.html"><a href="minería-de-datos.html#influx-and-outflux"><i class="fa fa-check"></i><b>1.7.7</b> Influx and outflux</a></li>
<li class="chapter" data-level="1.7.8" data-path="minería-de-datos.html"><a href="minería-de-datos.html#imputación-de-datos-monótonos"><i class="fa fa-check"></i><b>1.7.8</b> Imputación de datos monótonos</a></li>
<li class="chapter" data-level="1.7.9" data-path="minería-de-datos.html"><a href="minería-de-datos.html#multivariate-imputation-by-chained-equations-mice"><i class="fa fa-check"></i><b>1.7.9</b> Multivariate Imputation by Chained Equations (mice)</a></li>
<li class="chapter" data-level="1.7.10" data-path="minería-de-datos.html"><a href="minería-de-datos.html#en-r"><i class="fa fa-check"></i><b>1.7.10</b> En R</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="modelado-en-minería-de-datos.html"><a href="modelado-en-minería-de-datos.html"><i class="fa fa-check"></i><b>2</b> Modelado en Minería de datos</a><ul>
<li class="chapter" data-level="2.1" data-path="modelado-en-minería-de-datos.html"><a href="modelado-en-minería-de-datos.html#explorando-los-datos"><i class="fa fa-check"></i><b>2.1</b> Explorando los datos</a><ul>
<li class="chapter" data-level="2.1.1" data-path="modelado-en-minería-de-datos.html"><a href="modelado-en-minería-de-datos.html#resumen-de-los-datos"><i class="fa fa-check"></i><b>2.1.1</b> Resumen de los datos</a></li>
<li class="chapter" data-level="2.1.2" data-path="modelado-en-minería-de-datos.html"><a href="modelado-en-minería-de-datos.html#visualización"><i class="fa fa-check"></i><b>2.1.2</b> Visualización</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="modelado-en-minería-de-datos.html"><a href="modelado-en-minería-de-datos.html#componentes-principales"><i class="fa fa-check"></i><b>2.2</b> Componentes Principales</a></li>
<li class="chapter" data-level="2.3" data-path="modelado-en-minería-de-datos.html"><a href="modelado-en-minería-de-datos.html#análisis-de-correspondencia"><i class="fa fa-check"></i><b>2.3</b> Análisis de correspondencia</a><ul>
<li class="chapter" data-level="2.3.1" data-path="modelado-en-minería-de-datos.html"><a href="modelado-en-minería-de-datos.html#un-ejemplo-de-correspondencia-simple-y-múltiple"><i class="fa fa-check"></i><b>2.3.1</b> Un ejemplo de correspondencia simple y múltiple</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="clustering.html"><a href="clustering.html"><i class="fa fa-check"></i><b>3</b> Clustering</a><ul>
<li class="chapter" data-level="3.1" data-path="clustering.html"><a href="clustering.html#medidas-de-disimilaridad"><i class="fa fa-check"></i><b>3.1</b> Medidas de Disimilaridad</a><ul>
<li class="chapter" data-level="3.1.1" data-path="clustering.html"><a href="clustering.html#distancia-euclideana-variables-numéricas"><i class="fa fa-check"></i><b>3.1.1</b> Distancia Euclideana: Variables numéricas</a></li>
<li class="chapter" data-level="3.1.2" data-path="clustering.html"><a href="clustering.html#distancia-manhattan-p-grande"><i class="fa fa-check"></i><b>3.1.2</b> Distancia Manhattan: <span class="math inline">\(p\)</span> grande</a></li>
<li class="chapter" data-level="3.1.3" data-path="clustering.html"><a href="clustering.html#distancia-minkowski"><i class="fa fa-check"></i><b>3.1.3</b> Distancia Minkowski</a></li>
<li class="chapter" data-level="3.1.4" data-path="clustering.html"><a href="clustering.html#programando"><i class="fa fa-check"></i><b>3.1.4</b> programando</a></li>
<li class="chapter" data-level="3.1.5" data-path="clustering.html"><a href="clustering.html#variables-cualitativas"><i class="fa fa-check"></i><b>3.1.5</b> Variables cualitativas</a></li>
<li class="chapter" data-level="3.1.6" data-path="clustering.html"><a href="clustering.html#datos-mixtos"><i class="fa fa-check"></i><b>3.1.6</b> Datos mixtos</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="clustering.html"><a href="clustering.html#métodos-de-clustering"><i class="fa fa-check"></i><b>3.2</b> Métodos de clustering</a></li>
<li class="chapter" data-level="3.3" data-path="clustering.html"><a href="clustering.html#k-center-clustering-no-jerárquicos"><i class="fa fa-check"></i><b>3.3</b> K-center Clustering (no jerárquicos)</a><ul>
<li class="chapter" data-level="3.3.1" data-path="clustering.html"><a href="clustering.html#validación-cluster"><i class="fa fa-check"></i><b>3.3.1</b> Validación cluster</a></li>
<li class="chapter" data-level="3.3.2" data-path="clustering.html"><a href="clustering.html#distancias-para-variables-nominales-todas-nominales"><i class="fa fa-check"></i><b>3.3.2</b> Distancias para variables nominales (todas nominales)</a></li>
<li class="chapter" data-level="3.3.3" data-path="clustering.html"><a href="clustering.html#distancias-para-variables-mixtas-cuantitativas-nominales-ordinales"><i class="fa fa-check"></i><b>3.3.3</b> Distancias para variables mixtas (cuantitativas, nominales, ordinales)</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="clustering.html"><a href="clustering.html#cluster-jerárquico"><i class="fa fa-check"></i><b>3.4</b> Cluster Jerárquico</a><ul>
<li class="chapter" data-level="3.4.1" data-path="clustering.html"><a href="clustering.html#algoritmo-johnson"><i class="fa fa-check"></i><b>3.4.1</b> Algoritmo (Johnson)</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="clustering.html"><a href="clustering.html#ejercicios"><i class="fa fa-check"></i><b>3.5</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="regresión.html"><a href="regresión.html"><i class="fa fa-check"></i><b>4</b> Regresión</a><ul>
<li class="chapter" data-level="4.1" data-path="regresión.html"><a href="regresión.html#regresión-lineal"><i class="fa fa-check"></i><b>4.1</b> Regresión lineal</a><ul>
<li class="chapter" data-level="4.1.1" data-path="regresión.html"><a href="regresión.html#paso-1-base-de-datos"><i class="fa fa-check"></i><b>4.1.1</b> Paso 1: Base de datos</a></li>
<li class="chapter" data-level="4.1.2" data-path="regresión.html"><a href="regresión.html#paso-2-establecer-la-relación-de-interés."><i class="fa fa-check"></i><b>4.1.2</b> Paso 2: Establecer la relación de interés.</a></li>
<li class="chapter" data-level="4.1.3" data-path="regresión.html"><a href="regresión.html#paso-3-definir-el-modelo-a-utilizar"><i class="fa fa-check"></i><b>4.1.3</b> Paso 3: Definir el modelo a utilizar</a></li>
<li class="chapter" data-level="4.1.4" data-path="regresión.html"><a href="regresión.html#paso-4-optimizar-el-modelo"><i class="fa fa-check"></i><b>4.1.4</b> Paso 4: Optimizar el modelo</a></li>
<li class="chapter" data-level="4.1.5" data-path="regresión.html"><a href="regresión.html#paso-5-validar-el-modelo"><i class="fa fa-check"></i><b>4.1.5</b> Paso 5: Validar el modelo</a></li>
<li class="chapter" data-level="4.1.6" data-path="regresión.html"><a href="regresión.html#paso-6-predicir-a-partir-del-modelo"><i class="fa fa-check"></i><b>4.1.6</b> Paso 6: Predicir a partir del modelo</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="regresión.html"><a href="regresión.html#probit-y-logit"><i class="fa fa-check"></i><b>4.2</b> Probit y Logit</a><ul>
<li class="chapter" data-level="4.2.1" data-path="regresión.html"><a href="regresión.html#en-r-1"><i class="fa fa-check"></i><b>4.2.1</b> En R:</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="clasificación.html"><a href="clasificación.html"><i class="fa fa-check"></i><b>5</b> Clasificación</a><ul>
<li class="chapter" data-level="5.1" data-path="clasificación.html"><a href="clasificación.html#logit-probit"><i class="fa fa-check"></i><b>5.1</b> Logit Probit</a><ul>
<li class="chapter" data-level="5.1.1" data-path="clasificación.html"><a href="clasificación.html#pasos"><i class="fa fa-check"></i><b>5.1.1</b> Pasos</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="clasificación.html"><a href="clasificación.html#arboles-de-clasificación-cart"><i class="fa fa-check"></i><b>5.2</b> Arboles de clasificación (CART)</a><ul>
<li class="chapter" data-level="5.2.1" data-path="clasificación.html"><a href="clasificación.html#pasos-1"><i class="fa fa-check"></i><b>5.2.1</b> Pasos</a></li>
<li class="chapter" data-level="5.2.2" data-path="clasificación.html"><a href="clasificación.html#proceso-de-pruning-podado"><i class="fa fa-check"></i><b>5.2.2</b> Proceso de pruning (podado)</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="clasificación.html"><a href="clasificación.html#naive-bayes"><i class="fa fa-check"></i><b>5.3</b> Naive Bayes</a></li>
<li class="chapter" data-level="5.4" data-path="clasificación.html"><a href="clasificación.html#ejercicios."><i class="fa fa-check"></i><b>5.4</b> Ejercicios.</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="minería-de-texto.html"><a href="minería-de-texto.html"><i class="fa fa-check"></i><b>6</b> Minería de Texto</a><ul>
<li class="chapter" data-level="6.1" data-path="minería-de-texto.html"><a href="minería-de-texto.html#introducción"><i class="fa fa-check"></i><b>6.1</b> Introducción</a><ul>
<li class="chapter" data-level="6.1.1" data-path="minería-de-texto.html"><a href="minería-de-texto.html#en-la-práctica"><i class="fa fa-check"></i><b>6.1.1</b> En la práctica</a></li>
<li class="chapter" data-level="6.1.2" data-path="minería-de-texto.html"><a href="minería-de-texto.html#por-qué-importa"><i class="fa fa-check"></i><b>6.1.2</b> ¿Por qué importa?</a></li>
<li class="chapter" data-level="6.1.3" data-path="minería-de-texto.html"><a href="minería-de-texto.html#las-consecuencias-de-ignorarlo"><i class="fa fa-check"></i><b>6.1.3</b> Las consecuencias de ignorarlo</a></li>
<li class="chapter" data-level="6.1.4" data-path="minería-de-texto.html"><a href="minería-de-texto.html#beneficios"><i class="fa fa-check"></i><b>6.1.4</b> Beneficios</a></li>
<li class="chapter" data-level="6.1.5" data-path="minería-de-texto.html"><a href="minería-de-texto.html#flujo-de-trabajo-en-la-minería-de-texto"><i class="fa fa-check"></i><b>6.1.5</b> Flujo de trabajo en la minería de texto</a></li>
<li class="chapter" data-level="6.1.6" data-path="minería-de-texto.html"><a href="minería-de-texto.html#librerías-en-r-para-texto"><i class="fa fa-check"></i><b>6.1.6</b> Librerías en R para texto</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="minería-de-texto.html"><a href="minería-de-texto.html#recolección-de-texto"><i class="fa fa-check"></i><b>6.2</b> Recolección de texto</a><ul>
<li class="chapter" data-level="6.2.1" data-path="minería-de-texto.html"><a href="minería-de-texto.html#csv"><i class="fa fa-check"></i><b>6.2.1</b> CSV</a></li>
<li class="chapter" data-level="6.2.2" data-path="minería-de-texto.html"><a href="minería-de-texto.html#colección-de-documentos"><i class="fa fa-check"></i><b>6.2.2</b> Colección de documentos</a></li>
<li class="chapter" data-level="6.2.3" data-path="minería-de-texto.html"><a href="minería-de-texto.html#twitter-api"><i class="fa fa-check"></i><b>6.2.3</b> Twitter (API)</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="minería-de-texto.html"><a href="minería-de-texto.html#nubes-de-palabras"><i class="fa fa-check"></i><b>6.3</b> Nubes de palabras</a></li>
<li class="chapter" data-level="6.4" data-path="minería-de-texto.html"><a href="minería-de-texto.html#análisis-de-sentimiento-sentimental-scoring"><i class="fa fa-check"></i><b>6.4</b> Análisis de sentimiento (sentimental scoring)</a><ul>
<li class="chapter" data-level="6.4.1" data-path="minería-de-texto.html"><a href="minería-de-texto.html#polarización-y-léxico-subjetivo"><i class="fa fa-check"></i><b>6.4.1</b> Polarización y léxico subjetivo</a></li>
<li class="chapter" data-level="6.4.2" data-path="minería-de-texto.html"><a href="minería-de-texto.html#polarización-en-qdap"><i class="fa fa-check"></i><b>6.4.2</b> Polarización en QDAP</a></li>
<li class="chapter" data-level="6.4.3" data-path="minería-de-texto.html"><a href="minería-de-texto.html#librería-syuzhet"><i class="fa fa-check"></i><b>6.4.3</b> Librería syuzhet</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Minería de datos con R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="clasificación" class="section level1">
<h1><span class="header-section-number">5</span> Clasificación</h1>
<p>Pasos sugeridos</p>
<ol style="list-style-type: decimal">
<li>Preparar la base de datos; base de entrenamiento (trainbd) y de testeo (testbd). 70/30</li>
<li>Definir el modelo de clasificación
* Regresión logística (logit)
* Árbol de clasificación (CART)
* Naive bayes</li>
</ol>
<p>Base de datos, se empleara la base de datos de covid de México.</p>
<div class="sourceCode" id="cb399"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb399-1"><a href="clasificación.html#cb399-1"></a><span class="kw">library</span>(dplyr)</span>
<span id="cb399-2"><a href="clasificación.html#cb399-2"></a>covid&lt;-<span class="kw">read.csv</span>(<span class="st">&quot;C:</span><span class="ch">\\</span><span class="st">Users</span><span class="ch">\\</span><span class="st">ALVARO</span><span class="ch">\\</span><span class="st">Documents</span><span class="ch">\\</span><span class="st">GitHub</span><span class="ch">\\</span><span class="st">EST-384</span><span class="ch">\\</span><span class="st">data</span><span class="ch">\\</span><span class="st">covid_mx</span><span class="ch">\\</span><span class="st">200627COVID19MEXICO.csv&quot;</span>,<span class="dt">sep=</span><span class="st">&quot;,&quot;</span>,<span class="dt">na.strings =</span> <span class="kw">c</span>(<span class="dv">99</span>,<span class="dv">98</span>))</span>
<span id="cb399-3"><a href="clasificación.html#cb399-3"></a><span class="kw">object.size</span>(covid)<span class="op">/</span><span class="dv">10</span><span class="op">^</span><span class="dv">6</span></span></code></pre></div>
<pre><code>## 123.5 bytes</code></pre>
<div class="sourceCode" id="cb401"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb401-1"><a href="clasificación.html#cb401-1"></a>vv&lt;-<span class="kw">c</span>(<span class="st">&quot;SEXO&quot;</span>,<span class="st">&quot;FECHA_DEF&quot;</span>,<span class="st">&quot;NEUMONIA&quot;</span>,<span class="st">&quot;EDAD&quot;</span>,<span class="st">&quot;HABLA_LENGUA_INDIG&quot;</span>,<span class="st">&quot;DIABETES&quot;</span>,<span class="st">&quot;EPOC&quot;</span>,<span class="st">&quot;ASMA&quot;</span>,<span class="st">&quot;INMUSUPR&quot;</span>,<span class="st">&quot;HIPERTENSION&quot;</span>,<span class="st">&quot;OTRA_COM&quot;</span>,<span class="st">&quot;CARDIOVASCULAR&quot;</span>,<span class="st">&quot;OBESIDAD&quot;</span>,<span class="st">&quot;RENAL_CRONICA&quot;</span>,<span class="st">&quot;TABAQUISMO&quot;</span>,<span class="st">&quot;RESULTADO&quot;</span>)</span>
<span id="cb401-2"><a href="clasificación.html#cb401-2"></a>covid&lt;-covid[,vv]</span>
<span id="cb401-3"><a href="clasificación.html#cb401-3"></a>covid&lt;-covid <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(EDAD<span class="op">&lt;=</span><span class="dv">90</span>)</span>
<span id="cb401-4"><a href="clasificación.html#cb401-4"></a><span class="co">#Descripción </span></span>
<span id="cb401-5"><a href="clasificación.html#cb401-5"></a>Hmisc<span class="op">::</span><span class="kw">describe</span>(covid)</span></code></pre></div>
<pre><code>## covid 
## 
##  16  Variables      549476  Observations
## -----------------------------------------------------------------------
## SEXO 
##        n  missing distinct     Info     Mean      Gmd 
##   549476        0        2     0.75    1.507   0.4999 
##                         
## Value           1      2
## Frequency  270904 278572
## Proportion  0.493  0.507
## -----------------------------------------------------------------------
## FECHA_DEF 
##        n  missing distinct 
##   549476        0      122 
## 
## lowest : 2020-01-13 2020-01-14 2020-01-15 2020-01-29 2020-01-30
## highest: 2020-06-24 2020-06-25 2020-06-26 2020-06-27 9999-99-99
## -----------------------------------------------------------------------
## NEUMONIA 
##        n  missing distinct     Info     Mean      Gmd 
##   549465       11        2    0.392    1.845   0.2615 
##                         
## Value           1      2
## Frequency   84969 464496
## Proportion  0.155  0.845
## -----------------------------------------------------------------------
## EDAD 
##        n  missing distinct     Info     Mean      Gmd      .05 
##   549476        0       91        1    42.45    18.47       19 
##      .10      .25      .50      .75      .90      .95 
##       24       31       41       53       65       72 
## 
## lowest :  0  1  2  3  4, highest: 86 87 88 89 90
## -----------------------------------------------------------------------
## HABLA_LENGUA_INDIG 
##        n  missing distinct     Info     Mean      Gmd 
##   531854    17622        2    0.029     1.99   0.0196 
##                         
## Value           1      2
## Frequency    5264 526590
## Proportion   0.01   0.99
## -----------------------------------------------------------------------
## DIABETES 
##        n  missing distinct     Info     Mean      Gmd 
##   547557     1919        2    0.328    1.875   0.2187 
##                         
## Value           1      2
## Frequency   68437 479120
## Proportion  0.125  0.875
## -----------------------------------------------------------------------
## EPOC 
##        n  missing distinct     Info     Mean      Gmd 
##   547788     1688        2    0.047    1.984  0.03108 
##                         
## Value           1      2
## Frequency    8650 539138
## Proportion  0.016  0.984
## -----------------------------------------------------------------------
## ASMA 
##        n  missing distinct     Info     Mean      Gmd 
##   547781     1695        2    0.093    1.968  0.06216 
##                         
## Value           1      2
## Frequency   17589 530192
## Proportion  0.032  0.968
## -----------------------------------------------------------------------
## INMUSUPR 
##        n  missing distinct     Info     Mean      Gmd 
##   547565     1911        2    0.047    1.984  0.03133 
##                         
## Value           1      2
## Frequency    8715 538850
## Proportion  0.016  0.984
## -----------------------------------------------------------------------
## HIPERTENSION 
##        n  missing distinct     Info     Mean      Gmd 
##   547713     1763        2    0.409    1.837   0.2724 
##                         
## Value           1      2
## Frequency   89094 458619
## Proportion  0.163  0.837
## -----------------------------------------------------------------------
## OTRA_COM 
##        n  missing distinct     Info     Mean      Gmd 
##   546958     2518        2    0.088     1.97  0.05884 
##                         
## Value           1      2
## Frequency   16596 530362
## Proportion   0.03   0.97
## -----------------------------------------------------------------------
## CARDIOVASCULAR 
##        n  missing distinct     Info     Mean      Gmd 
##   547716     1760        2    0.066    1.978  0.04372 
##                         
## Value           1      2
## Frequency   12246 535470
## Proportion  0.022  0.978
## -----------------------------------------------------------------------
## OBESIDAD 
##        n  missing distinct     Info     Mean      Gmd 
##   547756     1720        2    0.411    1.836    0.274 
##                         
## Value           1      2
## Frequency   89749 458007
## Proportion  0.164  0.836
## -----------------------------------------------------------------------
## RENAL_CRONICA 
##        n  missing distinct     Info     Mean      Gmd 
##   547749     1727        2    0.058     1.98  0.03897 
##                         
## Value           1      2
## Frequency   10889 536860
## Proportion   0.02   0.98
## -----------------------------------------------------------------------
## TABAQUISMO 
##        n  missing distinct     Info     Mean      Gmd 
##   547637     1839        2    0.234    1.915    0.156 
##                         
## Value           1      2
## Frequency   46713 500924
## Proportion  0.085  0.915
## -----------------------------------------------------------------------
## RESULTADO 
##        n  missing distinct     Info     Mean      Gmd 
##   549476        0        3    0.821    1.736    0.688 
##                                
## Value           1      2      3
## Frequency  212222 270355  66899
## Proportion  0.386  0.492  0.122
## -----------------------------------------------------------------------</code></pre>
<div class="sourceCode" id="cb403"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb403-1"><a href="clasificación.html#cb403-1"></a><span class="co">#variable muerte</span></span>
<span id="cb403-2"><a href="clasificación.html#cb403-2"></a>covid<span class="op">$</span>muerte&lt;-(covid<span class="op">$</span>FECHA_DEF<span class="op">!=</span><span class="st">&quot;9999-99-99&quot;</span>)</span>
<span id="cb403-3"><a href="clasificación.html#cb403-3"></a>covid&lt;-covid <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">select</span>(<span class="op">-</span>FECHA_DEF)</span>
<span id="cb403-4"><a href="clasificación.html#cb403-4"></a>covid&lt;-<span class="kw">na.omit</span>(covid)</span></code></pre></div>
<div id="logit-probit" class="section level2">
<h2><span class="header-section-number">5.1</span> Logit Probit</h2>
<ul>
<li>Se usa para realizar clasificaciones basadas en probabilidades</li>
<li>Las clasificaciones son del tipo 1/0</li>
<li>Existen variaciones para clasificar considerando más grupos, empleando el logit y probit ordenado.</li>
</ul>
<div id="pasos" class="section level3">
<h3><span class="header-section-number">5.1.1</span> Pasos</h3>
<ol start="0" style="list-style-type: decimal">
<li>Identificar la variable (1/0) que se requiere clasificar, definir covariables para construir el modelos</li>
</ol>
<div class="sourceCode" id="cb404"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb404-1"><a href="clasificación.html#cb404-1"></a><span class="kw">table</span>(covid<span class="op">$</span>muerte)</span></code></pre></div>
<pre><code>## 
##  FALSE   TRUE 
## 494841  33611</code></pre>
<div class="sourceCode" id="cb406"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb406-1"><a href="clasificación.html#cb406-1"></a><span class="kw">prop.table</span>(<span class="kw">table</span>(covid<span class="op">$</span>muerte))</span></code></pre></div>
<pre><code>## 
##      FALSE       TRUE 
## 0.93639725 0.06360275</code></pre>
<div class="sourceCode" id="cb408"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb408-1"><a href="clasificación.html#cb408-1"></a><span class="co">##################################################</span></span>
<span id="cb408-2"><a href="clasificación.html#cb408-2"></a><span class="co">#a factor</span></span>
<span id="cb408-3"><a href="clasificación.html#cb408-3"></a><span class="co">##################################################</span></span>
<span id="cb408-4"><a href="clasificación.html#cb408-4"></a><span class="co">#sexo</span></span>
<span id="cb408-5"><a href="clasificación.html#cb408-5"></a>covid<span class="op">$</span>SEXO&lt;-<span class="kw">factor</span>(covid<span class="op">$</span>SEXO,<span class="dt">levels=</span><span class="dv">1</span><span class="op">:</span><span class="dv">2</span>,<span class="dt">labels=</span><span class="kw">c</span>(<span class="st">&quot;Mujer&quot;</span>,<span class="st">&quot;Hombre&quot;</span>))</span>
<span id="cb408-6"><a href="clasificación.html#cb408-6"></a><span class="co">#resultado</span></span>
<span id="cb408-7"><a href="clasificación.html#cb408-7"></a>covid<span class="op">$</span>RESULTADO&lt;-<span class="kw">factor</span>(covid<span class="op">$</span>RESULTADO,<span class="dt">levels =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>,<span class="dt">labels=</span><span class="kw">c</span>(<span class="st">&quot;COVID +&quot;</span>,<span class="st">&quot;COVID -&quot;</span>,<span class="st">&quot;COVID pendiende&quot;</span>))</span>
<span id="cb408-8"><a href="clasificación.html#cb408-8"></a>covid2&lt;-covid<span class="co">#para cart</span></span>
<span id="cb408-9"><a href="clasificación.html#cb408-9"></a><span class="co">#si/no</span></span>
<span id="cb408-10"><a href="clasificación.html#cb408-10"></a>aux&lt;-<span class="kw">c</span>(<span class="st">&quot;NEUMONIA&quot;</span>,<span class="st">&quot;HABLA_LENGUA_INDIG&quot;</span>,<span class="st">&quot;DIABETES&quot;</span>,<span class="st">&quot;EPOC&quot;</span>,<span class="st">&quot;ASMA&quot;</span>,<span class="st">&quot;INMUSUPR&quot;</span>,<span class="st">&quot;HIPERTENSION&quot;</span>,<span class="st">&quot;OTRA_COM&quot;</span>,<span class="st">&quot;CARDIOVASCULAR&quot;</span>,<span class="st">&quot;OBESIDAD&quot;</span>,<span class="st">&quot;RENAL_CRONICA&quot;</span>,<span class="st">&quot;TABAQUISMO&quot;</span>)</span>
<span id="cb408-11"><a href="clasificación.html#cb408-11"></a><span class="cf">for</span>(i <span class="cf">in</span> aux){</span>
<span id="cb408-12"><a href="clasificación.html#cb408-12"></a>  covid[[i]]&lt;-covid[[i]]<span class="op">==</span><span class="dv">1</span></span>
<span id="cb408-13"><a href="clasificación.html#cb408-13"></a>}</span>
<span id="cb408-14"><a href="clasificación.html#cb408-14"></a><span class="kw">str</span>(covid)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    528452 obs. of  16 variables:
##  $ SEXO              : Factor w/ 2 levels &quot;Mujer&quot;,&quot;Hombre&quot;: 2 2 2 2 2 1 2 1 2 2 ...
##  $ NEUMONIA          : logi  FALSE FALSE TRUE FALSE FALSE FALSE ...
##  $ EDAD              : int  63 39 62 86 46 40 52 46 73 61 ...
##  $ HABLA_LENGUA_INDIG: logi  FALSE FALSE FALSE FALSE FALSE FALSE ...
##  $ DIABETES          : logi  FALSE FALSE FALSE FALSE FALSE FALSE ...
##  $ EPOC              : logi  FALSE FALSE FALSE FALSE FALSE FALSE ...
##  $ ASMA              : logi  FALSE FALSE FALSE FALSE FALSE FALSE ...
##  $ INMUSUPR          : logi  FALSE FALSE FALSE FALSE FALSE FALSE ...
##  $ HIPERTENSION      : logi  TRUE FALSE FALSE TRUE FALSE FALSE ...
##  $ OTRA_COM          : logi  FALSE FALSE FALSE FALSE TRUE FALSE ...
##  $ CARDIOVASCULAR    : logi  FALSE FALSE FALSE FALSE FALSE FALSE ...
##  $ OBESIDAD          : logi  TRUE FALSE FALSE FALSE FALSE FALSE ...
##  $ RENAL_CRONICA     : logi  FALSE FALSE FALSE FALSE FALSE FALSE ...
##  $ TABAQUISMO        : logi  FALSE TRUE FALSE FALSE FALSE FALSE ...
##  $ RESULTADO         : Factor w/ 3 levels &quot;COVID +&quot;,&quot;COVID -&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...
##  $ muerte            : logi  FALSE FALSE TRUE TRUE FALSE FALSE ...
##  - attr(*, &quot;na.action&quot;)= &#39;omit&#39; Named int [1:21024] 23 184 230 236 363 642 737 820 831 915 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:21024] &quot;23&quot; &quot;184&quot; &quot;230&quot; &quot;236&quot; ...</code></pre>
<div class="sourceCode" id="cb410"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb410-1"><a href="clasificación.html#cb410-1"></a><span class="co">## Bases: trainbd, testbd</span></span>
<span id="cb410-2"><a href="clasificación.html#cb410-2"></a><span class="kw">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb410-3"><a href="clasificación.html#cb410-3"></a>index =<span class="st"> </span><span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="kw">nrow</span>(covid), <span class="dt">replace =</span> <span class="ot">TRUE</span>, <span class="dt">prob=</span><span class="kw">c</span>(<span class="fl">0.7</span>, <span class="fl">0.3</span>))</span>
<span id="cb410-4"><a href="clasificación.html#cb410-4"></a><span class="kw">prop.table</span>(<span class="kw">table</span>(index))</span></code></pre></div>
<pre><code>## index
##         1         2 
## 0.7001544 0.2998456</code></pre>
<div class="sourceCode" id="cb412"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb412-1"><a href="clasificación.html#cb412-1"></a>trainbd&lt;-covid[index<span class="op">==</span><span class="dv">1</span>,]</span>
<span id="cb412-2"><a href="clasificación.html#cb412-2"></a>testbd&lt;-covid[index<span class="op">==</span><span class="dv">2</span>,]</span></code></pre></div>
<ol style="list-style-type: decimal">
<li>Especificar el modelo (logit/probit)</li>
</ol>
<div class="sourceCode" id="cb413"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb413-1"><a href="clasificación.html#cb413-1"></a>m1&lt;-<span class="kw">glm</span>(muerte<span class="op">~</span>.,<span class="dt">data=</span>trainbd,<span class="dt">family =</span> <span class="kw">binomial</span>(<span class="dt">link=</span><span class="st">&quot;logit&quot;</span>))</span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Identificar las variables significativas</li>
<li>Construir el modelo con variables significativas</li>
</ol>
<div class="sourceCode" id="cb414"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb414-1"><a href="clasificación.html#cb414-1"></a><span class="kw">summary</span>(m1)</span></code></pre></div>
<pre><code>## 
## Call:
## glm(formula = muerte ~ ., family = binomial(link = &quot;logit&quot;), 
##     data = trainbd)
## 
## Deviance Residuals: 
##     Min       1Q   Median       3Q      Max  
## -2.2988  -0.2468  -0.1466  -0.0944   3.8471  
## 
## Coefficients:
##                            Estimate Std. Error  z value
## (Intercept)              -6.0453094  0.0351339 -172.065
## SEXOHombre                0.4528000  0.0167200   27.081
## NEUMONIATRUE              2.1601129  0.0166393  129.820
## EDAD                      0.0503957  0.0005735   87.881
## HABLA_LENGUA_INDIGTRUE    0.1299336  0.0636812    2.040
## DIABETESTRUE              0.3568379  0.0185218   19.266
## EPOCTRUE                  0.0606881  0.0396321    1.531
## ASMATRUE                 -0.2211289  0.0539182   -4.101
## INMUSUPRTRUE              0.3809713  0.0467945    8.141
## HIPERTENSIONTRUE          0.1546319  0.0187518    8.246
## OTRA_COMTRUE              0.5776581  0.0358269   16.124
## CARDIOVASCULARTRUE       -0.0544158  0.0376414   -1.446
## OBESIDADTRUE              0.1697086  0.0194157    8.741
## RENAL_CRONICATRUE         0.7287407  0.0354132   20.578
## TABAQUISMOTRUE           -0.0631770  0.0281778   -2.242
## RESULTADOCOVID -         -1.1795001  0.0193564  -60.936
## RESULTADOCOVID pendiende -1.3541807  0.0317650  -42.631
##                                      Pr(&gt;|z|)    
## (Intercept)              &lt; 0.0000000000000002 ***
## SEXOHombre               &lt; 0.0000000000000002 ***
## NEUMONIATRUE             &lt; 0.0000000000000002 ***
## EDAD                     &lt; 0.0000000000000002 ***
## HABLA_LENGUA_INDIGTRUE                 0.0413 *  
## DIABETESTRUE             &lt; 0.0000000000000002 ***
## EPOCTRUE                               0.1257    
## ASMATRUE                 0.000041102762764731 ***
## INMUSUPRTRUE             0.000000000000000391 ***
## HIPERTENSIONTRUE         &lt; 0.0000000000000002 ***
## OTRA_COMTRUE             &lt; 0.0000000000000002 ***
## CARDIOVASCULARTRUE                     0.1483    
## OBESIDADTRUE             &lt; 0.0000000000000002 ***
## RENAL_CRONICATRUE        &lt; 0.0000000000000002 ***
## TABAQUISMOTRUE                         0.0250 *  
## RESULTADOCOVID -         &lt; 0.0000000000000002 ***
## RESULTADOCOVID pendiende &lt; 0.0000000000000002 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## (Dispersion parameter for binomial family taken to be 1)
## 
##     Null deviance: 175579  on 369997  degrees of freedom
## Residual deviance: 113042  on 369981  degrees of freedom
## AIC: 113076
## 
## Number of Fisher Scoring iterations: 7</code></pre>
<div class="sourceCode" id="cb416"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb416-1"><a href="clasificación.html#cb416-1"></a>m2&lt;-<span class="kw">step</span>(m1)</span></code></pre></div>
<pre><code>## Start:  AIC=113075.8
## muerte ~ SEXO + NEUMONIA + EDAD + HABLA_LENGUA_INDIG + DIABETES + 
##     EPOC + ASMA + INMUSUPR + HIPERTENSION + OTRA_COM + CARDIOVASCULAR + 
##     OBESIDAD + RENAL_CRONICA + TABAQUISMO + RESULTADO
## 
##                      Df Deviance    AIC
## &lt;none&gt;                    113042 113076
## - CARDIOVASCULAR      1   113044 113076
## - EPOC                1   113044 113076
## - HABLA_LENGUA_INDIG  1   113046 113078
## - TABAQUISMO          1   113047 113079
## - ASMA                1   113059 113091
## - INMUSUPR            1   113105 113137
## - HIPERTENSION        1   113109 113141
## - OBESIDAD            1   113117 113149
## - OTRA_COM            1   113286 113318
## - DIABETES            1   113406 113438
## - RENAL_CRONICA       1   113445 113477
## - SEXO                1   113789 113821
## - RESULTADO           2   118350 118380
## - EDAD                1   121441 121473
## - NEUMONIA            1   131172 131204</code></pre>
<div class="sourceCode" id="cb418"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb418-1"><a href="clasificación.html#cb418-1"></a><span class="kw">summary</span>(m2)</span></code></pre></div>
<pre><code>## 
## Call:
## glm(formula = muerte ~ SEXO + NEUMONIA + EDAD + HABLA_LENGUA_INDIG + 
##     DIABETES + EPOC + ASMA + INMUSUPR + HIPERTENSION + OTRA_COM + 
##     CARDIOVASCULAR + OBESIDAD + RENAL_CRONICA + TABAQUISMO + 
##     RESULTADO, family = binomial(link = &quot;logit&quot;), data = trainbd)
## 
## Deviance Residuals: 
##     Min       1Q   Median       3Q      Max  
## -2.2988  -0.2468  -0.1466  -0.0944   3.8471  
## 
## Coefficients:
##                            Estimate Std. Error  z value
## (Intercept)              -6.0453094  0.0351339 -172.065
## SEXOHombre                0.4528000  0.0167200   27.081
## NEUMONIATRUE              2.1601129  0.0166393  129.820
## EDAD                      0.0503957  0.0005735   87.881
## HABLA_LENGUA_INDIGTRUE    0.1299336  0.0636812    2.040
## DIABETESTRUE              0.3568379  0.0185218   19.266
## EPOCTRUE                  0.0606881  0.0396321    1.531
## ASMATRUE                 -0.2211289  0.0539182   -4.101
## INMUSUPRTRUE              0.3809713  0.0467945    8.141
## HIPERTENSIONTRUE          0.1546319  0.0187518    8.246
## OTRA_COMTRUE              0.5776581  0.0358269   16.124
## CARDIOVASCULARTRUE       -0.0544158  0.0376414   -1.446
## OBESIDADTRUE              0.1697086  0.0194157    8.741
## RENAL_CRONICATRUE         0.7287407  0.0354132   20.578
## TABAQUISMOTRUE           -0.0631770  0.0281778   -2.242
## RESULTADOCOVID -         -1.1795001  0.0193564  -60.936
## RESULTADOCOVID pendiende -1.3541807  0.0317650  -42.631
##                                      Pr(&gt;|z|)    
## (Intercept)              &lt; 0.0000000000000002 ***
## SEXOHombre               &lt; 0.0000000000000002 ***
## NEUMONIATRUE             &lt; 0.0000000000000002 ***
## EDAD                     &lt; 0.0000000000000002 ***
## HABLA_LENGUA_INDIGTRUE                 0.0413 *  
## DIABETESTRUE             &lt; 0.0000000000000002 ***
## EPOCTRUE                               0.1257    
## ASMATRUE                 0.000041102762764731 ***
## INMUSUPRTRUE             0.000000000000000391 ***
## HIPERTENSIONTRUE         &lt; 0.0000000000000002 ***
## OTRA_COMTRUE             &lt; 0.0000000000000002 ***
## CARDIOVASCULARTRUE                     0.1483    
## OBESIDADTRUE             &lt; 0.0000000000000002 ***
## RENAL_CRONICATRUE        &lt; 0.0000000000000002 ***
## TABAQUISMOTRUE                         0.0250 *  
## RESULTADOCOVID -         &lt; 0.0000000000000002 ***
## RESULTADOCOVID pendiende &lt; 0.0000000000000002 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## (Dispersion parameter for binomial family taken to be 1)
## 
##     Null deviance: 175579  on 369997  degrees of freedom
## Residual deviance: 113042  on 369981  degrees of freedom
## AIC: 113076
## 
## Number of Fisher Scoring iterations: 7</code></pre>
<ol start="4" style="list-style-type: decimal">
<li>Predecir la clase de pertenencia en la base de test (<span class="math inline">\(prob&gt;0.5\)</span>)</li>
</ol>
<div class="sourceCode" id="cb420"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb420-1"><a href="clasificación.html#cb420-1"></a>clase&lt;-<span class="kw">predict</span>(m2,testbd,<span class="dt">type=</span><span class="st">&quot;response&quot;</span>)<span class="op">&gt;</span><span class="fl">0.5</span></span></code></pre></div>
<ol start="5" style="list-style-type: decimal">
<li>Observar la clasificación dada en base a la probabilidad fijada</li>
</ol>
<div class="sourceCode" id="cb421"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb421-1"><a href="clasificación.html#cb421-1"></a><span class="kw">table</span>(clase)</span></code></pre></div>
<pre><code>## clase
##  FALSE   TRUE 
## 153984   4470</code></pre>
<ol start="6" style="list-style-type: decimal">
<li>Comparar lo observado y lo predicho</li>
</ol>
<div class="sourceCode" id="cb423"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb423-1"><a href="clasificación.html#cb423-1"></a><span class="kw">table</span>(testbd<span class="op">$</span>muerte,clase)</span></code></pre></div>
<pre><code>##        clase
##          FALSE   TRUE
##   FALSE 146404   2041
##   TRUE    7580   2429</code></pre>
<ol start="7" style="list-style-type: decimal">
<li>Generar la matriz de confusión (librería caret)</li>
</ol>
<div class="sourceCode" id="cb425"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb425-1"><a href="clasificación.html#cb425-1"></a><span class="kw">library</span>(caret)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;caret&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:vegan&#39;:
## 
##     tolerance</code></pre>
<pre><code>## The following object is masked from &#39;package:survival&#39;:
## 
##     cluster</code></pre>
<div class="sourceCode" id="cb429"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb429-1"><a href="clasificación.html#cb429-1"></a><span class="kw">confusionMatrix</span>(<span class="kw">table</span>(testbd<span class="op">$</span>muerte,clase))</span></code></pre></div>
<pre><code>## Confusion Matrix and Statistics
## 
##        clase
##          FALSE   TRUE
##   FALSE 146404   2041
##   TRUE    7580   2429
##                                              
##                Accuracy : 0.9393             
##                  95% CI : (0.9381, 0.9405)   
##     No Information Rate : 0.9718             
##     P-Value [Acc &gt; NIR] : 1                  
##                                              
##                   Kappa : 0.3086             
##                                              
##  Mcnemar&#39;s Test P-Value : &lt;0.0000000000000002
##                                              
##             Sensitivity : 0.9508             
##             Specificity : 0.5434             
##          Pos Pred Value : 0.9863             
##          Neg Pred Value : 0.2427             
##              Prevalence : 0.9718             
##          Detection Rate : 0.9240             
##    Detection Prevalence : 0.9368             
##       Balanced Accuracy : 0.7471             
##                                              
##        &#39;Positive&#39; Class : FALSE              
## </code></pre>
<p>Efectos marginales</p>
<div class="sourceCode" id="cb431"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb431-1"><a href="clasificación.html#cb431-1"></a><span class="kw">library</span>(mfx)</span></code></pre></div>
<pre><code>## Loading required package: sandwich</code></pre>
<pre><code>## Loading required package: lmtest</code></pre>
<pre><code>## Loading required package: zoo</code></pre>
<pre><code>## 
## Attaching package: &#39;zoo&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     as.Date, as.Date.numeric</code></pre>
<pre><code>## Loading required package: MASS</code></pre>
<pre><code>## 
## Attaching package: &#39;MASS&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:srvyr&#39;:
## 
##     select</code></pre>
<pre><code>## The following object is masked from &#39;package:dplyr&#39;:
## 
##     select</code></pre>
<pre><code>## Loading required package: betareg</code></pre>
<div class="sourceCode" id="cb442"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb442-1"><a href="clasificación.html#cb442-1"></a>info&lt;-<span class="kw">logitmfx</span>(<span class="kw">formula</span>(m2),<span class="dt">data=</span>testbd)</span>
<span id="cb442-2"><a href="clasificación.html#cb442-2"></a><span class="kw">barplot</span>(info<span class="op">$</span>mfxest[,<span class="dv">1</span>],<span class="dt">horiz =</span> T,<span class="dt">las=</span><span class="dv">1</span>,<span class="dt">cex.names =</span> <span class="fl">0.5</span>,<span class="dt">xlim=</span><span class="kw">c</span>(<span class="op">-</span><span class="fl">0.1</span>,<span class="fl">0.1</span>),<span class="dt">pos=</span><span class="op">-</span><span class="fl">0.02</span>)</span></code></pre></div>
<pre><code>## Warning in plot.window(xlim, ylim, log = log, ...): &quot;pos&quot; is not a
## graphical parameter</code></pre>
<pre><code>## Warning in title(main = main, sub = sub, xlab = xlab, ylab =
## ylab, ...): &quot;pos&quot; is not a graphical parameter</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-75-1.png" width="672" /></p>
</div>
</div>
<div id="arboles-de-clasificación-cart" class="section level2">
<h2><span class="header-section-number">5.2</span> Arboles de clasificación (CART)</h2>
<p>El método CART uso condiciones basadas en cortes sobre covariables para realizar la clasificación (predicción) de una clase. El proceso de clasificación comienza desde el nodo raíz del árbol; en cada nodo, el proceso verificará si el valor de entrada debe continuar de forma recursiva hacia la sub-rama derecha o izquierda de acuerdo con la condición de división, y se detiene al encontrar cualquier <strong>nodo hoja</strong> (terminal) del árbol de decisión.</p>
<div id="pasos-1" class="section level3">
<h3><span class="header-section-number">5.2.1</span> Pasos</h3>
<p>Crear el modelo de clasificación</p>
<ol style="list-style-type: decimal">
<li>Cargar la librería rpart</li>
</ol>
<div class="sourceCode" id="cb445"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb445-1"><a href="clasificación.html#cb445-1"></a><span class="kw">library</span>(rpart)</span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Usar la función rpart para construir el modelo de clasificación</li>
</ol>
<div class="sourceCode" id="cb446"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb446-1"><a href="clasificación.html#cb446-1"></a>covid2<span class="op">$</span>muerte&lt;-<span class="kw">factor</span>(covid2<span class="op">$</span>muerte,<span class="kw">c</span>(T,F),<span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;Muerte&quot;</span>,<span class="st">&quot;No muerte&quot;</span>))</span>
<span id="cb446-2"><a href="clasificación.html#cb446-2"></a><span class="co">#si/no</span></span>
<span id="cb446-3"><a href="clasificación.html#cb446-3"></a>aux&lt;-<span class="kw">c</span>(<span class="st">&quot;NEUMONIA&quot;</span>,<span class="st">&quot;HABLA_LENGUA_INDIG&quot;</span>,<span class="st">&quot;DIABETES&quot;</span>,<span class="st">&quot;EPOC&quot;</span>,<span class="st">&quot;ASMA&quot;</span>,<span class="st">&quot;INMUSUPR&quot;</span>,<span class="st">&quot;HIPERTENSION&quot;</span>,<span class="st">&quot;OTRA_COM&quot;</span>,<span class="st">&quot;CARDIOVASCULAR&quot;</span>,<span class="st">&quot;OBESIDAD&quot;</span>,<span class="st">&quot;RENAL_CRONICA&quot;</span>,<span class="st">&quot;TABAQUISMO&quot;</span>)</span>
<span id="cb446-4"><a href="clasificación.html#cb446-4"></a><span class="cf">for</span>(i <span class="cf">in</span> aux){</span>
<span id="cb446-5"><a href="clasificación.html#cb446-5"></a>  covid2[[i]]&lt;-<span class="kw">factor</span>(covid2[[i]],<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>,<span class="kw">c</span>(<span class="st">&quot;SI&quot;</span>,<span class="st">&quot;NO&quot;</span>))</span>
<span id="cb446-6"><a href="clasificación.html#cb446-6"></a>}</span>
<span id="cb446-7"><a href="clasificación.html#cb446-7"></a><span class="kw">str</span>(covid2)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    528452 obs. of  16 variables:
##  $ SEXO              : Factor w/ 2 levels &quot;Mujer&quot;,&quot;Hombre&quot;: 2 2 2 2 2 1 2 1 2 2 ...
##  $ NEUMONIA          : Factor w/ 2 levels &quot;SI&quot;,&quot;NO&quot;: 2 2 1 2 2 2 2 2 2 2 ...
##  $ EDAD              : int  63 39 62 86 46 40 52 46 73 61 ...
##  $ HABLA_LENGUA_INDIG: Factor w/ 2 levels &quot;SI&quot;,&quot;NO&quot;: 2 2 2 2 2 2 2 2 2 2 ...
##  $ DIABETES          : Factor w/ 2 levels &quot;SI&quot;,&quot;NO&quot;: 2 2 2 2 2 2 2 2 1 2 ...
##  $ EPOC              : Factor w/ 2 levels &quot;SI&quot;,&quot;NO&quot;: 2 2 2 2 2 2 2 2 2 2 ...
##  $ ASMA              : Factor w/ 2 levels &quot;SI&quot;,&quot;NO&quot;: 2 2 2 2 2 2 2 2 2 2 ...
##  $ INMUSUPR          : Factor w/ 2 levels &quot;SI&quot;,&quot;NO&quot;: 2 2 2 2 2 2 2 2 2 2 ...
##  $ HIPERTENSION      : Factor w/ 2 levels &quot;SI&quot;,&quot;NO&quot;: 1 2 2 1 2 2 2 2 2 2 ...
##  $ OTRA_COM          : Factor w/ 2 levels &quot;SI&quot;,&quot;NO&quot;: 2 2 2 2 1 2 2 1 2 2 ...
##  $ CARDIOVASCULAR    : Factor w/ 2 levels &quot;SI&quot;,&quot;NO&quot;: 2 2 2 2 2 2 2 1 2 2 ...
##  $ OBESIDAD          : Factor w/ 2 levels &quot;SI&quot;,&quot;NO&quot;: 1 2 2 2 2 2 2 1 2 2 ...
##  $ RENAL_CRONICA     : Factor w/ 2 levels &quot;SI&quot;,&quot;NO&quot;: 2 2 2 2 2 2 2 2 2 2 ...
##  $ TABAQUISMO        : Factor w/ 2 levels &quot;SI&quot;,&quot;NO&quot;: 2 1 2 2 2 2 2 2 2 2 ...
##  $ RESULTADO         : Factor w/ 3 levels &quot;COVID +&quot;,&quot;COVID -&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...
##  $ muerte            : Factor w/ 2 levels &quot;Muerte&quot;,&quot;No muerte&quot;: 2 2 1 1 2 2 2 2 2 2 ...
##  - attr(*, &quot;na.action&quot;)= &#39;omit&#39; Named int [1:21024] 23 184 230 236 363 642 737 820 831 915 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:21024] &quot;23&quot; &quot;184&quot; &quot;230&quot; &quot;236&quot; ...</code></pre>
<div class="sourceCode" id="cb448"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb448-1"><a href="clasificación.html#cb448-1"></a><span class="co">## Bases: trainbd, testbd</span></span>
<span id="cb448-2"><a href="clasificación.html#cb448-2"></a><span class="kw">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb448-3"><a href="clasificación.html#cb448-3"></a>index =<span class="st"> </span><span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="kw">nrow</span>(covid2), <span class="dt">replace =</span> <span class="ot">TRUE</span>, <span class="dt">prob=</span><span class="kw">c</span>(<span class="fl">0.7</span>, <span class="fl">0.3</span>))</span>
<span id="cb448-4"><a href="clasificación.html#cb448-4"></a><span class="kw">prop.table</span>(<span class="kw">table</span>(index))</span></code></pre></div>
<pre><code>## index
##         1         2 
## 0.7001544 0.2998456</code></pre>
<div class="sourceCode" id="cb450"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb450-1"><a href="clasificación.html#cb450-1"></a>trainbd&lt;-covid2[index<span class="op">==</span><span class="dv">1</span>,]</span>
<span id="cb450-2"><a href="clasificación.html#cb450-2"></a>testbd&lt;-covid2[index<span class="op">==</span><span class="dv">2</span>,]</span>
<span id="cb450-3"><a href="clasificación.html#cb450-3"></a></span>
<span id="cb450-4"><a href="clasificación.html#cb450-4"></a>mod1&lt;-<span class="kw">rpart</span>(muerte<span class="op">~</span>.,<span class="dt">data=</span>trainbd)</span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Explorar los nodos creados por rpart</li>
</ol>
<div class="sourceCode" id="cb451"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb451-1"><a href="clasificación.html#cb451-1"></a>mod1</span></code></pre></div>
<pre><code>## n= 369998 
## 
## node), split, n, loss, yval, (yprob)
##       * denotes terminal node
## 
##  1) root 369998 23602 No muerte (0.06378953 0.93621047)  
##    2) NEUMONIA=SI 57116 16946 No muerte (0.29669445 0.70330555)  
##      4) RESULTADO=COVID + 34442 13362 No muerte (0.38795656 0.61204344)  
##        8) EDAD&gt;=51.5 20669 10039 No muerte (0.48570323 0.51429677)  
##         16) EDAD&gt;=64.5 9808  4363 Muerte (0.55515905 0.44484095) *
##         17) EDAD&lt; 64.5 10861  4594 No muerte (0.42298131 0.57701869) *
##        9) EDAD&lt; 51.5 13773  3323 No muerte (0.24126915 0.75873085) *
##      5) RESULTADO=COVID -,COVID pendiende 22674  3584 No muerte (0.15806651 0.84193349) *
##    3) NEUMONIA=NO 312882  6656 No muerte (0.02127320 0.97872680) *</code></pre>
<ol start="4" style="list-style-type: decimal">
<li>Examinar los parámetros del árbol con printcp</li>
</ol>
<div class="sourceCode" id="cb453"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb453-1"><a href="clasificación.html#cb453-1"></a><span class="kw">printcp</span>(mod1)</span></code></pre></div>
<pre><code>## 
## Classification tree:
## rpart(formula = muerte ~ ., data = trainbd)
## 
## Variables actually used in tree construction:
## [1] EDAD      NEUMONIA  RESULTADO
## 
## Root node error: 23602/369998 = 0.06379
## 
## n= 369998 
## 
##         CP nsplit rel error xerror      xstd
## 1 0.011461      0   1.00000 1.0000 0.0062981
## 2 0.010000      4   0.95416 0.9567 0.0061694</code></pre>
<ol start="5" style="list-style-type: decimal">
<li>Usar el comando plotcp para explorar los parámetros de forma gráfica</li>
</ol>
<div class="sourceCode" id="cb455"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb455-1"><a href="clasificación.html#cb455-1"></a><span class="kw">plotcp</span>(mod1)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-80-1.png" width="672" /></p>
<ol start="6" style="list-style-type: decimal">
<li>Usar la función summary para para examinar el modelo</li>
</ol>
<div class="sourceCode" id="cb456"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb456-1"><a href="clasificación.html#cb456-1"></a><span class="kw">summary</span>(mod1)</span></code></pre></div>
<pre><code>## Call:
## rpart(formula = muerte ~ ., data = trainbd)
##   n= 369998 
## 
##           CP nsplit rel error    xerror        xstd
## 1 0.01146089      0 1.0000000 1.0000000 0.006298140
## 2 0.01000000      4 0.9541564 0.9566986 0.006169353
## 
## Variable importance
##  NEUMONIA RESULTADO      EDAD 
##        72        14        13 
## 
## Node number 1: 369998 observations,    complexity param=0.01146089
##   predicted class=No muerte  expected loss=0.06378953  P(node) =1
##     class counts: 23602 346396
##    probabilities: 0.064 0.936 
##   left son=2 (57116 obs) right son=3 (312882 obs)
##   Primary splits:
##       NEUMONIA     splits as  LR,       improve=7327.636, (0 missing)
##       EDAD         &lt; 57.5 to the right, improve=3636.657, (0 missing)
##       RESULTADO    splits as  LRR,      improve=1662.835, (0 missing)
##       DIABETES     splits as  LR,       improve=1643.543, (0 missing)
##       HIPERTENSION splits as  LR,       improve=1431.782, (0 missing)
## 
## Node number 2: 57116 observations,    complexity param=0.01146089
##   predicted class=No muerte  expected loss=0.2966944  P(node) =0.1543684
##     class counts: 16946 40170
##    probabilities: 0.297 0.703 
##   left son=4 (34442 obs) right son=5 (22674 obs)
##   Primary splits:
##       RESULTADO    splits as  LRR,      improve=1445.2040, (0 missing)
##       EDAD         &lt; 49.5 to the right, improve=1368.6730, (0 missing)
##       HIPERTENSION splits as  LR,       improve= 357.6824, (0 missing)
##       DIABETES     splits as  LR,       improve= 303.1878, (0 missing)
##       SEXO         splits as  RL,       improve= 104.5722, (0 missing)
##   Surrogate splits:
##       EDAD           &lt; 30.5 to the right, agree=0.631, adj=0.072, (0 split)
##       INMUSUPR       splits as  RL,       agree=0.609, adj=0.015, (0 split)
##       OTRA_COM       splits as  RL,       agree=0.607, adj=0.010, (0 split)
##       EPOC           splits as  RL,       agree=0.604, adj=0.002, (0 split)
##       CARDIOVASCULAR splits as  RL,       agree=0.604, adj=0.002, (0 split)
## 
## Node number 3: 312882 observations
##   predicted class=No muerte  expected loss=0.0212732  P(node) =0.8456316
##     class counts:  6656 306226
##    probabilities: 0.021 0.979 
## 
## Node number 4: 34442 observations,    complexity param=0.01146089
##   predicted class=No muerte  expected loss=0.3879566  P(node) =0.09308699
##     class counts: 13362 21080
##    probabilities: 0.388 0.612 
##   left son=8 (20669 obs) right son=9 (13773 obs)
##   Primary splits:
##       EDAD          &lt; 51.5 to the right, improve=987.67290, (0 missing)
##       HIPERTENSION  splits as  LR,       improve=276.65030, (0 missing)
##       DIABETES      splits as  LR,       improve=194.20950, (0 missing)
##       RENAL_CRONICA splits as  LR,       improve= 89.58991, (0 missing)
##       EPOC          splits as  LR,       improve= 51.97436, (0 missing)
## 
## Node number 5: 22674 observations
##   predicted class=No muerte  expected loss=0.1580665  P(node) =0.06128141
##     class counts:  3584 19090
##    probabilities: 0.158 0.842 
## 
## Node number 8: 20669 observations,    complexity param=0.01146089
##   predicted class=No muerte  expected loss=0.4857032  P(node) =0.05586246
##     class counts: 10039 10630
##    probabilities: 0.486 0.514 
##   left son=16 (9808 obs) right son=17 (10861 obs)
##   Primary splits:
##       EDAD          &lt; 64.5 to the right, improve=180.08500, (0 missing)
##       SEXO          splits as  RL,       improve= 26.65526, (0 missing)
##       RENAL_CRONICA splits as  LR,       improve= 23.86824, (0 missing)
##       HIPERTENSION  splits as  LR,       improve= 20.12766, (0 missing)
##       DIABETES      splits as  LR,       improve= 13.55075, (0 missing)
##   Surrogate splits:
##       HIPERTENSION   splits as  LR, agree=0.573, adj=0.100, (0 split)
##       EPOC           splits as  LR, agree=0.547, adj=0.044, (0 split)
##       CARDIOVASCULAR splits as  LR, agree=0.543, adj=0.037, (0 split)
##       OTRA_COM       splits as  LR, agree=0.531, adj=0.011, (0 split)
##       RENAL_CRONICA  splits as  LR, agree=0.529, adj=0.007, (0 split)
## 
## Node number 9: 13773 observations
##   predicted class=No muerte  expected loss=0.2412691  P(node) =0.03722453
##     class counts:  3323 10450
##    probabilities: 0.241 0.759 
## 
## Node number 16: 9808 observations
##   predicted class=Muerte     expected loss=0.4448409  P(node) =0.02650825
##     class counts:  5445  4363
##    probabilities: 0.555 0.445 
## 
## Node number 17: 10861 observations
##   predicted class=No muerte  expected loss=0.4229813  P(node) =0.02935421
##     class counts:  4594  6267
##    probabilities: 0.423 0.577</code></pre>
<p>Visualizar el árbol</p>
<ol start="7" style="list-style-type: decimal">
<li>Usar la función plot y text(,all=T, n=T)</li>
</ol>
<div class="sourceCode" id="cb458"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb458-1"><a href="clasificación.html#cb458-1"></a><span class="kw">plot</span>(mod1)</span>
<span id="cb458-2"><a href="clasificación.html#cb458-2"></a><span class="kw">text</span>(mod1,<span class="dt">all=</span>T,<span class="dt">use.n=</span>T)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-82-1.png" width="672" /></p>
<div class="sourceCode" id="cb459"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb459-1"><a href="clasificación.html#cb459-1"></a><span class="co">#install.packages(&quot;rpart.plot&quot;)</span></span>
<span id="cb459-2"><a href="clasificación.html#cb459-2"></a><span class="kw">library</span>(rpart.plot)</span>
<span id="cb459-3"><a href="clasificación.html#cb459-3"></a><span class="kw">rpart.plot</span>(mod1)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-82-2.png" width="672" /></p>
<ol start="8" style="list-style-type: decimal">
<li>Ajustes en el layout plot(…,uniform=TRUE, branch=0.6, margin=0.1)</li>
</ol>
<div class="sourceCode" id="cb460"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb460-1"><a href="clasificación.html#cb460-1"></a><span class="kw">plot</span>(mod1,<span class="dt">uniform=</span>T, <span class="dt">branch=</span><span class="dv">1</span>, <span class="dt">margin=</span><span class="fl">0.1</span>)</span>
<span id="cb460-2"><a href="clasificación.html#cb460-2"></a><span class="kw">text</span>(mod1,<span class="dt">all=</span>T,<span class="dt">use.n=</span>T)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-83-1.png" width="672" /></p>
<p>Predicción de la clasificación</p>
<ol start="9" style="list-style-type: decimal">
<li>predict(…, testbd, type=“class”), predicción sobre la base de test</li>
</ol>
<div class="sourceCode" id="cb461"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb461-1"><a href="clasificación.html#cb461-1"></a>clase&lt;-<span class="kw">predict</span>(mod1,testbd,<span class="dt">type =</span> <span class="st">&quot;class&quot;</span>)</span></code></pre></div>
<ol start="10" style="list-style-type: decimal">
<li>Elaborar una tabla de contingencia de la clasificación</li>
</ol>
<div class="sourceCode" id="cb462"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb462-1"><a href="clasificación.html#cb462-1"></a><span class="kw">table</span>(clase,testbd<span class="op">$</span>muerte)</span></code></pre></div>
<pre><code>##            
## clase       Muerte No muerte
##   Muerte      2405      1862
##   No muerte   7604    146583</code></pre>
<ol start="11" style="list-style-type: decimal">
<li>Emplear el comando confusionMatrix sobre la tabla del paso anterior, para evaluar la calidad de la clasificación. Mcnemar’s Test H0: <span class="math inline">\(ij=ji\)</span></li>
</ol>
<div class="sourceCode" id="cb464"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb464-1"><a href="clasificación.html#cb464-1"></a><span class="kw">library</span>(caret)</span>
<span id="cb464-2"><a href="clasificación.html#cb464-2"></a><span class="kw">confusionMatrix</span>(<span class="kw">table</span>(clase,testbd<span class="op">$</span>muerte))</span></code></pre></div>
<pre><code>## Confusion Matrix and Statistics
## 
##            
## clase       Muerte No muerte
##   Muerte      2405      1862
##   No muerte   7604    146583
##                                                
##                Accuracy : 0.9403               
##                  95% CI : (0.9391, 0.9414)     
##     No Information Rate : 0.9368               
##     P-Value [Acc &gt; NIR] : 0.00000000806        
##                                                
##                   Kappa : 0.3109               
##                                                
##  Mcnemar&#39;s Test P-Value : &lt; 0.00000000000000022
##                                                
##             Sensitivity : 0.24028              
##             Specificity : 0.98746              
##          Pos Pred Value : 0.56363              
##          Neg Pred Value : 0.95068              
##              Prevalence : 0.06317              
##          Detection Rate : 0.01518              
##    Detection Prevalence : 0.02693              
##       Balanced Accuracy : 0.61387              
##                                                
##        &#39;Positive&#39; Class : Muerte               
## </code></pre>
</div>
<div id="proceso-de-pruning-podado" class="section level3">
<h3><span class="header-section-number">5.2.2</span> Proceso de pruning (podado)</h3>
<p>El objetivo es eliminar variables redundantes y crear un modelo de clasificación mas robusto</p>
<p>Pasos:</p>
<ol style="list-style-type: decimal">
<li>Encuentre el valor mínimo en cross-validation error. (xerror)</li>
</ol>
<div class="sourceCode" id="cb466"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb466-1"><a href="clasificación.html#cb466-1"></a><span class="kw">min</span>(mod1<span class="op">$</span>cptable[,<span class="st">&quot;xerror&quot;</span>])</span></code></pre></div>
<pre><code>## [1] 0.9566986</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Encontrar el registro que contiene el valor del anterior paso. (which.min, cptable)</li>
</ol>
<div class="sourceCode" id="cb468"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb468-1"><a href="clasificación.html#cb468-1"></a><span class="kw">which.min</span>(mod1<span class="op">$</span>cptable[,<span class="st">&quot;xerror&quot;</span>])</span></code></pre></div>
<pre><code>## 2 
## 2</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>Obtenga el “cost complexity parameter” del valor mínimo encontrado (CP)</li>
</ol>
<div class="sourceCode" id="cb470"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb470-1"><a href="clasificación.html#cb470-1"></a>mod1.cp&lt;-mod1<span class="op">$</span>cptable[<span class="dv">2</span>,<span class="st">&quot;CP&quot;</span>]</span></code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>Realizar el podado con la función prune, empleando el modelo original y el CP del valor mínimo en xerror (paso anterior)</li>
</ol>
<div class="sourceCode" id="cb471"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb471-1"><a href="clasificación.html#cb471-1"></a>mod1.prune&lt;-<span class="kw">prune</span>(mod1,<span class="dt">cp=</span>mod1.cp)</span></code></pre></div>
<ol start="5" style="list-style-type: decimal">
<li>Visualice el nuevo árbol</li>
</ol>
<div class="sourceCode" id="cb472"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb472-1"><a href="clasificación.html#cb472-1"></a><span class="kw">rpart.plot</span>(mod1.prune)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-91-1.png" width="672" /></p>
<ol start="6" style="list-style-type: decimal">
<li>Realice la predicción a partir del árbol podado</li>
</ol>
<div class="sourceCode" id="cb473"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb473-1"><a href="clasificación.html#cb473-1"></a>clase&lt;-<span class="kw">predict</span>(mod1.prune,testbd,<span class="dt">type =</span> <span class="st">&quot;class&quot;</span>)</span></code></pre></div>
<ol start="7" style="list-style-type: decimal">
<li>Evalúe los resultados con la matriz de confusión</li>
</ol>
<div class="sourceCode" id="cb474"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb474-1"><a href="clasificación.html#cb474-1"></a><span class="kw">confusionMatrix</span>(<span class="kw">table</span>(clase,testbd<span class="op">$</span>muerte))</span></code></pre></div>
<pre><code>## Confusion Matrix and Statistics
## 
##            
## clase       Muerte No muerte
##   Muerte      2405      1862
##   No muerte   7604    146583
##                                                
##                Accuracy : 0.9403               
##                  95% CI : (0.9391, 0.9414)     
##     No Information Rate : 0.9368               
##     P-Value [Acc &gt; NIR] : 0.00000000806        
##                                                
##                   Kappa : 0.3109               
##                                                
##  Mcnemar&#39;s Test P-Value : &lt; 0.00000000000000022
##                                                
##             Sensitivity : 0.24028              
##             Specificity : 0.98746              
##          Pos Pred Value : 0.56363              
##          Neg Pred Value : 0.95068              
##              Prevalence : 0.06317              
##          Detection Rate : 0.01518              
##    Detection Prevalence : 0.02693              
##       Balanced Accuracy : 0.61387              
##                                                
##        &#39;Positive&#39; Class : Muerte               
## </code></pre>
</div>
</div>
<div id="naive-bayes" class="section level2">
<h2><span class="header-section-number">5.3</span> Naive Bayes</h2>
<p>Es un modelo basado en probabilidad, su base teórica aplica el teorema de Bayes (fuerte supuesto de independencia).</p>
<blockquote>
<p>nota</p>
</blockquote>
<p><span class="math display">\[P(muerte/edad,neumonia, ...)&lt;&gt;P(\sim muerte/edad,neumonia,...)\]</span></p>
<p><span class="math display">\[P(C/X)=\frac{P(C)*P(X/C)}{P(X)}\]</span>
* <span class="math inline">\(P(C/X)\)</span> Probabilidad Posterior
* <span class="math inline">\(P(C)\)</span> Probabilidad a Priori
* <span class="math inline">\(P(X/C)\)</span> Verosimilitud
* <span class="math inline">\(P(X)\)</span> Marginal</p>
<p>Si se tiene varios predictores (<span class="math inline">\(X\)</span>) se supone independencia, esto es:</p>
<p><span class="math display">\[P(C/X) =  \frac{P(X_1/C)*P(X_2/C)*\ldots *P(X_n/C)*P(C)}{P(X)}\]</span>
Pasos,</p>
<ol style="list-style-type: decimal">
<li>Cargar la librería e1071 y emplear la función naiveBayes para construir el clasificador</li>
</ol>
<div class="sourceCode" id="cb476"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb476-1"><a href="clasificación.html#cb476-1"></a><span class="kw">library</span>(e1071)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;e1071&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:Hmisc&#39;:
## 
##     impute</code></pre>
<div class="sourceCode" id="cb479"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb479-1"><a href="clasificación.html#cb479-1"></a>mod1&lt;-<span class="kw">naiveBayes</span>(muerte<span class="op">~</span>.,<span class="dt">data=</span>trainbd)</span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Explorar los resultados</li>
</ol>
<div class="sourceCode" id="cb480"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb480-1"><a href="clasificación.html#cb480-1"></a>mod1</span></code></pre></div>
<pre><code>## 
## Naive Bayes Classifier for Discrete Predictors
## 
## Call:
## naiveBayes.default(x = X, y = Y, laplace = laplace)
## 
## A-priori probabilities:
## Y
##     Muerte  No muerte 
## 0.06378953 0.93621047 
## 
## Conditional probabilities:
##            SEXO
## Y               Mujer    Hombre
##   Muerte    0.3513685 0.6486315
##   No muerte 0.5045959 0.4954041
## 
##            NEUMONIA
## Y                  SI        NO
##   Muerte    0.7179900 0.2820100
##   No muerte 0.1159655 0.8840345
## 
##            EDAD
## Y               [,1]     [,2]
##   Muerte    60.42543 15.03884
##   No muerte 41.26280 15.78475
## 
##            HABLA_LENGUA_INDIG
## Y                    SI          NO
##   Muerte    0.017710364 0.982289636
##   No muerte 0.009295719 0.990704281
## 
##            DIABETES
## Y                  SI        NO
##   Muerte    0.3705618 0.6294382
##   No muerte 0.1089822 0.8910178
## 
##            EPOC
## Y                   SI         NO
##   Muerte    0.05448691 0.94551309
##   No muerte 0.01310927 0.98689073
## 
##            ASMA
## Y                   SI         NO
##   Muerte    0.02076095 0.97923905
##   No muerte 0.03311239 0.96688761
## 
##            INMUSUPR
## Y                   SI         NO
##   Muerte    0.03694602 0.96305398
##   No muerte 0.01450074 0.98549926
## 
##            HIPERTENSION
## Y                  SI        NO
##   Muerte    0.4184815 0.5815185
##   No muerte 0.1461045 0.8538955
## 
##            OTRA_COM
## Y                   SI         NO
##   Muerte    0.06448606 0.93551394
##   No muerte 0.02853670 0.97146330
## 
##            CARDIOVASCULAR
## Y                   SI         NO
##   Muerte    0.05982544 0.94017456
##   No muerte 0.01967113 0.98032887
## 
##            OBESIDAD
## Y                 SI       NO
##   Muerte    0.232904 0.767096
##   No muerte 0.159589 0.840411
## 
##            RENAL_CRONICA
## Y                   SI         NO
##   Muerte    0.07825608 0.92174392
##   No muerte 0.01579695 0.98420305
## 
##            TABAQUISMO
## Y                   SI         NO
##   Muerte    0.09397509 0.90602491
##   No muerte 0.08496345 0.91503655
## 
##            RESULTADO
## Y              COVID +    COVID - COVID pendiende
##   Muerte    0.74934328 0.19455978      0.05609694
##   No muerte 0.36267162 0.51143200      0.12589637</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>Predecir los resultados en la base de testeo</li>
</ol>
<div class="sourceCode" id="cb482"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb482-1"><a href="clasificación.html#cb482-1"></a>clase&lt;-<span class="kw">predict</span>(mod1,testbd,<span class="dt">type =</span> <span class="st">&quot;class&quot;</span>)</span></code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>Realizar la matriz de confusión</li>
</ol>
<div class="sourceCode" id="cb483"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb483-1"><a href="clasificación.html#cb483-1"></a><span class="kw">confusionMatrix</span>(<span class="kw">table</span>(clase,testbd<span class="op">$</span>muerte))</span></code></pre></div>
<pre><code>## Confusion Matrix and Statistics
## 
##            
## clase       Muerte No muerte
##   Muerte      5261      8124
##   No muerte   4748    140321
##                                              
##                Accuracy : 0.9188             
##                  95% CI : (0.9174, 0.9201)   
##     No Information Rate : 0.9368             
##     P-Value [Acc &gt; NIR] : 1                  
##                                              
##                   Kappa : 0.4069             
##                                              
##  Mcnemar&#39;s Test P-Value : &lt;0.0000000000000002
##                                              
##             Sensitivity : 0.52563            
##             Specificity : 0.94527            
##          Pos Pred Value : 0.39305            
##          Neg Pred Value : 0.96727            
##              Prevalence : 0.06317            
##          Detection Rate : 0.03320            
##    Detection Prevalence : 0.08447            
##       Balanced Accuracy : 0.73545            
##                                              
##        &#39;Positive&#39; Class : Muerte             
## </code></pre>
</div>
<div id="ejercicios." class="section level2">
<h2><span class="header-section-number">5.4</span> Ejercicios.</h2>
<ol style="list-style-type: decimal">
<li>Usando la ENDSA para un año en particular, defina clases de violencia en base a las variables de violencia y aplique los métodos de clasificación con las variables que considere relevante.</li>
<li>Usando la Encuesta a hogares, para la clase nivel de educación (ninguno, primaria, secundaria, superior) aplique los métodos de clasificación considerando las variables relevantes.</li>
</ol>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="regresión.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="minería-de-texto.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
