<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6 Clustering | Minería de datos con R</title>
  <meta name="description" content="Este libro esta destinado a la materia de Programación Estadística II de la carrera de Estadística de la Universidad Mayor de San Andres." />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="6 Clustering | Minería de datos con R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Este libro esta destinado a la materia de Programación Estadística II de la carrera de Estadística de la Universidad Mayor de San Andres." />
  <meta name="github-repo" content="alvarolimber/est-384" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6 Clustering | Minería de datos con R" />
  
  <meta name="twitter:description" content="Este libro esta destinado a la materia de Programación Estadística II de la carrera de Estadística de la Universidad Mayor de San Andres." />
  

<meta name="author" content="Alvaro Chirino Gutierrez" />


<meta name="date" content="2020-06-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="modelado-en-minería-de-datos.html"/>
<link rel="next" href="regresión.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Prefacio</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#audiencia"><i class="fa fa-check"></i>Audiencia</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#estructura-del-libro"><i class="fa fa-check"></i>Estructura del libro</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#software-y-acuerdos"><i class="fa fa-check"></i>Software y acuerdos</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#datos"><i class="fa fa-check"></i>Datos</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#agradecimiento"><i class="fa fa-check"></i>Agradecimiento</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="acerca-del-autor.html"><a href="acerca-del-autor.html"><i class="fa fa-check"></i>Acerca del autor</a><ul>
<li class="chapter" data-level="" data-path="acerca-del-autor.html"><a href="acerca-del-autor.html#bibliografía"><i class="fa fa-check"></i>Bibliografía</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="minería-de-datos.html"><a href="minería-de-datos.html"><i class="fa fa-check"></i><b>1</b> Minería de Datos</a><ul>
<li class="chapter" data-level="1.1" data-path="minería-de-datos.html"><a href="minería-de-datos.html#motivación-para-la-mineria-de-datos"><i class="fa fa-check"></i><b>1.1</b> Motivación para la Mineria de datos</a></li>
<li class="chapter" data-level="1.2" data-path="minería-de-datos.html"><a href="minería-de-datos.html#qué-es-la-minería-de-datos"><i class="fa fa-check"></i><b>1.2</b> ¿Qué es la minería de datos?</a></li>
<li class="chapter" data-level="1.3" data-path="minería-de-datos.html"><a href="minería-de-datos.html#datos-y-conocimiento"><i class="fa fa-check"></i><b>1.3</b> Datos y conocimiento</a><ul>
<li class="chapter" data-level="1.3.1" data-path="minería-de-datos.html"><a href="minería-de-datos.html#datos-1"><i class="fa fa-check"></i><b>1.3.1</b> Datos:</a></li>
<li class="chapter" data-level="1.3.2" data-path="minería-de-datos.html"><a href="minería-de-datos.html#conocimiento"><i class="fa fa-check"></i><b>1.3.2</b> Conocimiento:</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="minería-de-datos.html"><a href="minería-de-datos.html#requerimientos"><i class="fa fa-check"></i><b>1.4</b> Requerimientos</a></li>
<li class="chapter" data-level="1.5" data-path="minería-de-datos.html"><a href="minería-de-datos.html#knowledge-discovery-in-databases-kdd"><i class="fa fa-check"></i><b>1.5</b> knowledge discovery in databases (KDD)</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introR.html"><a href="introR.html"><i class="fa fa-check"></i><b>2</b> Introduccion a R</a><ul>
<li class="chapter" data-level="2.1" data-path="introR.html"><a href="introR.html#tipos-de-estructuras"><i class="fa fa-check"></i><b>2.1</b> Tipos de estructuras</a></li>
<li class="chapter" data-level="2.2" data-path="introR.html"><a href="introR.html#loops-y-condiciones"><i class="fa fa-check"></i><b>2.2</b> Loops y condiciones</a></li>
<li class="chapter" data-level="2.3" data-path="introR.html"><a href="introR.html#funciones"><i class="fa fa-check"></i><b>2.3</b> Funciones</a></li>
<li class="chapter" data-level="2.4" data-path="introR.html"><a href="introR.html#importacion-de-datos"><i class="fa fa-check"></i><b>2.4</b> Importacion de datos</a></li>
<li class="chapter" data-level="2.5" data-path="introR.html"><a href="introR.html#dataframe-y-exploración"><i class="fa fa-check"></i><b>2.5</b> Dataframe y exploración</a></li>
<li class="chapter" data-level="2.6" data-path="introR.html"><a href="introR.html#estadística-descriptiva"><i class="fa fa-check"></i><b>2.6</b> Estadística descriptiva</a></li>
<li class="chapter" data-level="2.7" data-path="introR.html"><a href="introR.html#muestreo-e-inferencia"><i class="fa fa-check"></i><b>2.7</b> Muestreo e inferencia</a></li>
<li class="chapter" data-level="2.8" data-path="introR.html"><a href="introR.html#gráficos-de-origen"><i class="fa fa-check"></i><b>2.8</b> Gráficos de origen</a></li>
<li class="chapter" data-level="2.9" data-path="introR.html"><a href="introR.html#ggplot"><i class="fa fa-check"></i><b>2.9</b> ggplot</a></li>
<li class="chapter" data-level="2.10" data-path="introR.html"><a href="introR.html#r-markdown"><i class="fa fa-check"></i><b>2.10</b> R Markdown</a><ul>
<li class="chapter" data-level="2.10.1" data-path="introR.html"><a href="introR.html#instalación"><i class="fa fa-check"></i><b>2.10.1</b> Instalación</a></li>
<li class="chapter" data-level="2.10.2" data-path="introR.html"><a href="introR.html#yaml-header"><i class="fa fa-check"></i><b>2.10.2</b> YAML Header</a></li>
<li class="chapter" data-level="2.10.3" data-path="introR.html"><a href="introR.html#sintaxis-básica"><i class="fa fa-check"></i><b>2.10.3</b> Sintaxis básica</a></li>
<li class="chapter" data-level="2.10.4" data-path="introR.html"><a href="introR.html#tipos-de-documentos"><i class="fa fa-check"></i><b>2.10.4</b> Tipos de documentos</a></li>
<li class="chapter" data-level="2.10.5" data-path="introR.html"><a href="introR.html#chunks"><i class="fa fa-check"></i><b>2.10.5</b> Chunks</a></li>
</ul></li>
<li class="chapter" data-level="2.11" data-path="introR.html"><a href="introR.html#shiny"><i class="fa fa-check"></i><b>2.11</b> Shiny</a></li>
<li class="chapter" data-level="2.12" data-path="introR.html"><a href="introR.html#ejercicios-propuestos"><i class="fa fa-check"></i><b>2.12</b> Ejercicios Propuestos</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="chapter" data-level="3" data-path="preparación-de-los-datos.html"><a href="preparación-de-los-datos.html"><i class="fa fa-check"></i><b>3</b> Preparación de los datos</a><ul>
<li class="chapter" data-level="3.1" data-path="preparación-de-los-datos.html"><a href="preparación-de-los-datos.html#recopilación"><i class="fa fa-check"></i><b>3.1</b> Recopilación</a></li>
<li class="chapter" data-level="3.2" data-path="preparación-de-los-datos.html"><a href="preparación-de-los-datos.html#data-warehouse"><i class="fa fa-check"></i><b>3.2</b> Data Warehouse</a></li>
<li class="chapter" data-level="3.3" data-path="preparación-de-los-datos.html"><a href="preparación-de-los-datos.html#data-warehouse-in-r"><i class="fa fa-check"></i><b>3.3</b> Data Warehouse in R</a></li>
<li class="chapter" data-level="3.4" data-path="preparación-de-los-datos.html"><a href="preparación-de-los-datos.html#importación"><i class="fa fa-check"></i><b>3.4</b> Importación</a></li>
<li class="chapter" data-level="3.5" data-path="preparación-de-los-datos.html"><a href="preparación-de-los-datos.html#recopilación-1"><i class="fa fa-check"></i><b>3.5</b> Recopilación</a></li>
<li class="chapter" data-level="3.6" data-path="preparación-de-los-datos.html"><a href="preparación-de-los-datos.html#limpieza"><i class="fa fa-check"></i><b>3.6</b> Limpieza</a></li>
<li class="chapter" data-level="3.7" data-path="preparación-de-los-datos.html"><a href="preparación-de-los-datos.html#ejercicio-reshape"><i class="fa fa-check"></i><b>3.7</b> Ejercicio (reshape)</a></li>
<li class="chapter" data-level="3.8" data-path="preparación-de-los-datos.html"><a href="preparación-de-los-datos.html#limpieza-fechas"><i class="fa fa-check"></i><b>3.8</b> Limpieza (fechas)</a></li>
<li class="chapter" data-level="3.9" data-path="preparación-de-los-datos.html"><a href="preparación-de-los-datos.html#limpieza-string"><i class="fa fa-check"></i><b>3.9</b> Limpieza (String)</a></li>
<li class="chapter" data-level="3.10" data-path="preparación-de-los-datos.html"><a href="preparación-de-los-datos.html#transfomración"><i class="fa fa-check"></i><b>3.10</b> Transfomración</a></li>
<li class="chapter" data-level="3.11" data-path="preparación-de-los-datos.html"><a href="preparación-de-los-datos.html#imputación-de-variables"><i class="fa fa-check"></i><b>3.11</b> Imputación de variables</a></li>
<li class="chapter" data-level="3.12" data-path="preparación-de-los-datos.html"><a href="preparación-de-los-datos.html#la-falta-de-información-es-información"><i class="fa fa-check"></i><b>3.12</b> La falta de información es información</a></li>
<li class="chapter" data-level="3.13" data-path="preparación-de-los-datos.html"><a href="preparación-de-los-datos.html#aproximación-formal"><i class="fa fa-check"></i><b>3.13</b> Aproximación formal</a></li>
<li class="chapter" data-level="3.14" data-path="preparación-de-los-datos.html"><a href="preparación-de-los-datos.html#mcar-mar-mnar"><i class="fa fa-check"></i><b>3.14</b> MCAR, MAR, MNAR</a></li>
<li class="chapter" data-level="3.15" data-path="preparación-de-los-datos.html"><a href="preparación-de-los-datos.html#alternativas-para-trabajar-con-los-missings-ad-hoc"><i class="fa fa-check"></i><b>3.15</b> Alternativas para trabajar con los Missings (Ad-hoc)</a></li>
<li class="chapter" data-level="3.16" data-path="preparación-de-los-datos.html"><a href="preparación-de-los-datos.html#imputación-multiple"><i class="fa fa-check"></i><b>3.16</b> Imputación Multiple</a></li>
<li class="chapter" data-level="3.17" data-path="preparación-de-los-datos.html"><a href="preparación-de-los-datos.html#patrones-en-datos-multivariados"><i class="fa fa-check"></i><b>3.17</b> Patrones en datos multivariados</a></li>
<li class="chapter" data-level="3.18" data-path="preparación-de-los-datos.html"><a href="preparación-de-los-datos.html#influx-and-outflux"><i class="fa fa-check"></i><b>3.18</b> Influx and outflux</a></li>
<li class="chapter" data-level="3.19" data-path="preparación-de-los-datos.html"><a href="preparación-de-los-datos.html#imputación-de-datos-monótonos"><i class="fa fa-check"></i><b>3.19</b> Imputación de datos monótonos</a></li>
<li class="chapter" data-level="3.20" data-path="preparación-de-los-datos.html"><a href="preparación-de-los-datos.html#multivariate-imputation-by-chained-equations-mice"><i class="fa fa-check"></i><b>3.20</b> Multivariate Imputation by Chained Equations (mice)</a></li>
<li class="chapter" data-level="3.21" data-path="preparación-de-los-datos.html"><a href="preparación-de-los-datos.html#en-r"><i class="fa fa-check"></i><b>3.21</b> En R</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="preparación-de-los-datos-1.html"><a href="preparación-de-los-datos-1.html"><i class="fa fa-check"></i><b>4</b> Preparación de los datos</a><ul>
<li class="chapter" data-level="4.1" data-path="preparación-de-los-datos-1.html"><a href="preparación-de-los-datos-1.html#recopilación-de-datos"><i class="fa fa-check"></i><b>4.1</b> Recopilación de datos</a></li>
<li class="chapter" data-level="4.2" data-path="preparación-de-los-datos-1.html"><a href="preparación-de-los-datos-1.html#importación-y-exploración"><i class="fa fa-check"></i><b>4.2</b> Importación y exploración</a></li>
<li class="chapter" data-level="4.3" data-path="preparación-de-los-datos-1.html"><a href="preparación-de-los-datos-1.html#limpieza-y-transformación"><i class="fa fa-check"></i><b>4.3</b> Limpieza y transformación</a></li>
<li class="chapter" data-level="4.4" data-path="preparación-de-los-datos-1.html"><a href="preparación-de-los-datos-1.html#métodos-de-imputación"><i class="fa fa-check"></i><b>4.4</b> Métodos de imputación</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="modelado-en-minería-de-datos.html"><a href="modelado-en-minería-de-datos.html"><i class="fa fa-check"></i><b>5</b> Modelado en Minería de datos</a><ul>
<li class="chapter" data-level="5.1" data-path="modelado-en-minería-de-datos.html"><a href="modelado-en-minería-de-datos.html#explorando-los-datos"><i class="fa fa-check"></i><b>5.1</b> Explorando los datos</a><ul>
<li class="chapter" data-level="5.1.1" data-path="modelado-en-minería-de-datos.html"><a href="modelado-en-minería-de-datos.html#resumen-de-los-datos"><i class="fa fa-check"></i><b>5.1.1</b> Resumen de los datos</a></li>
<li class="chapter" data-level="5.1.2" data-path="modelado-en-minería-de-datos.html"><a href="modelado-en-minería-de-datos.html#visualización"><i class="fa fa-check"></i><b>5.1.2</b> Visualización</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="modelado-en-minería-de-datos.html"><a href="modelado-en-minería-de-datos.html#componentes-principales"><i class="fa fa-check"></i><b>5.2</b> Componentes Principales</a></li>
<li class="chapter" data-level="5.3" data-path="modelado-en-minería-de-datos.html"><a href="modelado-en-minería-de-datos.html#análisis-de-correspondencia"><i class="fa fa-check"></i><b>5.3</b> Análisis de correspondencia</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="clustering.html"><a href="clustering.html"><i class="fa fa-check"></i><b>6</b> Clustering</a><ul>
<li class="chapter" data-level="6.1" data-path="clustering.html"><a href="clustering.html#medidas-de-disimilaridad"><i class="fa fa-check"></i><b>6.1</b> Medidas de Disimilaridad</a><ul>
<li class="chapter" data-level="6.1.1" data-path="clustering.html"><a href="clustering.html#distancia-euclideana-variables-numéricas"><i class="fa fa-check"></i><b>6.1.1</b> Distancia Euclideana: Variables numéricas</a></li>
<li class="chapter" data-level="6.1.2" data-path="clustering.html"><a href="clustering.html#distancia-manhattan-p-grande"><i class="fa fa-check"></i><b>6.1.2</b> Distancia Manhattan: <span class="math inline">\(p\)</span> grande</a></li>
<li class="chapter" data-level="6.1.3" data-path="clustering.html"><a href="clustering.html#distancia-minkowski"><i class="fa fa-check"></i><b>6.1.3</b> Distancia Minkowski</a></li>
<li class="chapter" data-level="6.1.4" data-path="clustering.html"><a href="clustering.html#programando"><i class="fa fa-check"></i><b>6.1.4</b> programando</a></li>
<li class="chapter" data-level="6.1.5" data-path="clustering.html"><a href="clustering.html#variables-cualitativas"><i class="fa fa-check"></i><b>6.1.5</b> Variables cualitativas</a></li>
<li class="chapter" data-level="6.1.6" data-path="clustering.html"><a href="clustering.html#datos-mixtos"><i class="fa fa-check"></i><b>6.1.6</b> Datos mixtos</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="clustering.html"><a href="clustering.html#métodos-de-clustering"><i class="fa fa-check"></i><b>6.2</b> Métodos de clustering</a></li>
<li class="chapter" data-level="6.3" data-path="clustering.html"><a href="clustering.html#k-center-clustering-no-jerárquicos"><i class="fa fa-check"></i><b>6.3</b> K-center Clustering (no jerárquicos)</a><ul>
<li class="chapter" data-level="6.3.1" data-path="clustering.html"><a href="clustering.html#validación-cluster"><i class="fa fa-check"></i><b>6.3.1</b> Validación cluster</a></li>
<li class="chapter" data-level="6.3.2" data-path="clustering.html"><a href="clustering.html#distancias-para-variables-nominales-todas-nominales"><i class="fa fa-check"></i><b>6.3.2</b> Distancias para variables nominales (todas nominales)</a></li>
<li class="chapter" data-level="6.3.3" data-path="clustering.html"><a href="clustering.html#distancias-para-variables-mixtas-cuantitativas-nominales-ordinales"><i class="fa fa-check"></i><b>6.3.3</b> Distancias para variables mixtas (cuantitativas, nominales, ordinales)</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="clustering.html"><a href="clustering.html#cluster-jerárquico"><i class="fa fa-check"></i><b>6.4</b> Cluster Jerárquico</a><ul>
<li class="chapter" data-level="6.4.1" data-path="clustering.html"><a href="clustering.html#algoritmo-johnson"><i class="fa fa-check"></i><b>6.4.1</b> Algoritmo (Johnson)</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="clustering.html"><a href="clustering.html#ejercicios"><i class="fa fa-check"></i><b>6.5</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="regresión.html"><a href="regresión.html"><i class="fa fa-check"></i><b>7</b> Regresión</a><ul>
<li class="chapter" data-level="7.1" data-path="regresión.html"><a href="regresión.html#regresión-lineal"><i class="fa fa-check"></i><b>7.1</b> Regresión lineal</a></li>
<li class="chapter" data-level="7.2" data-path="regresión.html"><a href="regresión.html#probit-y-logit"><i class="fa fa-check"></i><b>7.2</b> Probit y Logit</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="clasificación.html"><a href="clasificación.html"><i class="fa fa-check"></i><b>8</b> Clasificación</a><ul>
<li class="chapter" data-level="8.1" data-path="clasificación.html"><a href="clasificación.html#arboles-de-decision"><i class="fa fa-check"></i><b>8.1</b> Arboles de decision</a></li>
<li class="chapter" data-level="8.2" data-path="clasificación.html"><a href="clasificación.html#naive-bayes"><i class="fa fa-check"></i><b>8.2</b> Naive Bayes</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="minería-de-texto.html"><a href="minería-de-texto.html"><i class="fa fa-check"></i><b>9</b> Minería de Texto</a><ul>
<li class="chapter" data-level="9.1" data-path="minería-de-texto.html"><a href="minería-de-texto.html#recolección-de-texto"><i class="fa fa-check"></i><b>9.1</b> Recolección de texto</a></li>
<li class="chapter" data-level="9.2" data-path="minería-de-texto.html"><a href="minería-de-texto.html#nubes-de-palabras"><i class="fa fa-check"></i><b>9.2</b> Nubes de palabras</a></li>
<li class="chapter" data-level="9.3" data-path="minería-de-texto.html"><a href="minería-de-texto.html#análisis-de-sentimiento"><i class="fa fa-check"></i><b>9.3</b> Análisis de sentimiento</a></li>
<li class="chapter" data-level="9.4" data-path="minería-de-texto.html"><a href="minería-de-texto.html#n-gramas-y-correlaciones"><i class="fa fa-check"></i><b>9.4</b> n-gramas y correlaciones</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Minería de datos con R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="clustering" class="section level1">
<h1><span class="header-section-number">6</span> Clustering</h1>
<p>El clustering es un método cuyo objetivo es el de crear grupos en base a las relaciones multivariantes que existen en los datos, este método es un método previo a las técnicas de clasificación que existen. La base del clustering es la definición de la similaridad entre las filas. Similaridad es definida como una función de distancia entre un par de filas.</p>
<p>Es importante distinguir la existencia de grupos naturales dentro de los datos, normalmente estos grupos son características naturales de las observaciones de interés.</p>
<div id="medidas-de-disimilaridad" class="section level2">
<h2><span class="header-section-number">6.1</span> Medidas de Disimilaridad</h2>
<p>Dado el objetivo del clustering, el aspecto mas importante dentro de estos métodos es utilizar de forma correcta la medida de (di)similaridad entre un para de casos dentro de la base de datos.</p>
<p>La definición de las medidas de distancia es crucial para aplicar estos modelos. Funciones de distancia incorrecta pueden generar sesgos en los resultados y ser un problema para etapas posteriores de la mineria de datos. Debemos distinguir las funciones de distancia segun la naturaleza de las variables.</p>
<p>Sean las filas <span class="math inline">\(x\)</span> e <span class="math inline">\(y\)</span> dentro de una base de datos, estos vectores tienen una dimensión <span class="math inline">\(p\)</span>, es decir, se observan <span class="math inline">\(p\)</span> variables para las 2 observaciones.</p>
<div id="distancia-euclideana-variables-numéricas" class="section level3">
<h3><span class="header-section-number">6.1.1</span> Distancia Euclideana: Variables numéricas</h3>
<p><span class="math display">\[d(x,y)=\sqrt{\sum_{i=1}^p{(x_i-y_i)^2}}\]</span></p>
<p>Donde los <span class="math inline">\(x_i\)</span> y <span class="math inline">\(_y_i\)</span> son los valores para la variable <span class="math inline">\(i\)</span> de las observaciones <span class="math inline">\(x\)</span> e <span class="math inline">\(y\)</span>.</p>
</div>
<div id="distancia-manhattan-p-grande" class="section level3">
<h3><span class="header-section-number">6.1.2</span> Distancia Manhattan: <span class="math inline">\(p\)</span> grande</h3>
<p><span class="math display">\[d(x,y)=\sum_{i=1}^p{|x_i-y_i|}\]</span></p>
</div>
<div id="distancia-minkowski" class="section level3">
<h3><span class="header-section-number">6.1.3</span> Distancia Minkowski</h3>
<p><span class="math display">\[d(x,y)=\left(\sum_{i=1}^p{|x_i-y_i|^d}\right)^{1/d}\]</span></p>
<div class="sourceCode" id="cb283"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb283-1" title="1">aux&lt;-<span class="kw">matrix</span>(<span class="kw">rnorm</span>(<span class="dv">100</span>),<span class="dt">nrow=</span><span class="dv">5</span>)</a>
<a class="sourceLine" id="cb283-2" title="2"><span class="kw">dist</span>(aux) <span class="co">#euclideana</span></a></code></pre></div>
<pre><code>##          1        2        3        4
## 2 6.242581                           
## 3 6.169821 5.905550                  
## 4 7.421876 5.650037 6.655177         
## 5 8.148640 6.937412 6.958611 6.116255</code></pre>
<div class="sourceCode" id="cb285"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb285-1" title="1"><span class="kw">dist</span>(aux, <span class="dt">method=</span><span class="st">&quot;manhattan&quot;</span>)</a></code></pre></div>
<pre><code>##          1        2        3        4
## 2 22.82806                           
## 3 20.51118 20.69275                  
## 4 29.22178 20.49048 22.91836         
## 5 32.42345 25.29545 27.47537 22.40951</code></pre>
<div class="sourceCode" id="cb287"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb287-1" title="1"><span class="kw">dist</span>(aux, <span class="dt">method=</span><span class="st">&quot;minkowski&quot;</span>, <span class="dt">p=</span><span class="dv">3</span>)</a></code></pre></div>
<pre><code>##          1        2        3        4
## 2 4.284564                           
## 3 4.542376 4.371538                  
## 4 4.963872 3.916364 4.680469         
## 5 5.291542 4.906102 4.590191 4.328310</code></pre>
</div>
<div id="programando" class="section level3">
<h3><span class="header-section-number">6.1.4</span> programando</h3>
<div class="sourceCode" id="cb289"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb289-1" title="1">minkowski&lt;-<span class="cf">function</span>(x,y,d){</a>
<a class="sourceLine" id="cb289-2" title="2">  dd&lt;-(<span class="kw">sum</span>(<span class="kw">abs</span>(x<span class="op">-</span>y)<span class="op">**</span>d))<span class="op">**</span>(<span class="dv">1</span><span class="op">/</span>d)</a>
<a class="sourceLine" id="cb289-3" title="3">  <span class="kw">return</span>(dd)</a>
<a class="sourceLine" id="cb289-4" title="4">}</a>
<a class="sourceLine" id="cb289-5" title="5"><span class="kw">minkowski</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>),<span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">2</span>,<span class="dv">1</span>),<span class="dt">d=</span><span class="dv">2</span>)</a></code></pre></div>
<pre><code>## [1] 3.605551</code></pre>
<div class="sourceCode" id="cb291"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb291-1" title="1">x&lt;-<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)</a>
<a class="sourceLine" id="cb291-2" title="2">y&lt;-<span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">2</span>,<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb291-3" title="3"><span class="kw">sum</span>(<span class="kw">abs</span>(x<span class="op">-</span>y)) <span class="co"># manhattan</span></a></code></pre></div>
<pre><code>## [1] 5</code></pre>
<div class="sourceCode" id="cb293"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb293-1" title="1"><span class="kw">sqrt</span>(<span class="kw">sum</span>(<span class="kw">abs</span>(x<span class="op">-</span>y)<span class="op">**</span><span class="dv">2</span>)) <span class="co"># euclideana</span></a></code></pre></div>
<pre><code>## [1] 3.605551</code></pre>
<div class="sourceCode" id="cb295"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb295-1" title="1"><span class="co"># la funcion de distancia</span></a>
<a class="sourceLine" id="cb295-2" title="2">distancia&lt;-<span class="cf">function</span>(bd,<span class="dt">d=</span><span class="dv">2</span>){</a>
<a class="sourceLine" id="cb295-3" title="3">  nf&lt;-<span class="kw">dim</span>(bd)[<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb295-4" title="4">  DD&lt;-<span class="kw">matrix</span>(<span class="ot">NA</span>,nf<span class="dv">-1</span>,nf<span class="dv">-1</span>)</a>
<a class="sourceLine" id="cb295-5" title="5">  <span class="kw">colnames</span>(DD)&lt;-<span class="dv">1</span><span class="op">:</span>(nf<span class="dv">-1</span>)</a>
<a class="sourceLine" id="cb295-6" title="6">  <span class="kw">rownames</span>(DD)&lt;-<span class="dv">2</span><span class="op">:</span>nf</a>
<a class="sourceLine" id="cb295-7" title="7">  <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>(nf<span class="dv">-1</span>)){</a>
<a class="sourceLine" id="cb295-8" title="8">    <span class="cf">for</span>(j <span class="cf">in</span> (i<span class="op">+</span><span class="dv">1</span>)<span class="op">:</span>nf){</a>
<a class="sourceLine" id="cb295-9" title="9">      DD[j<span class="dv">-1</span>,i]&lt;-<span class="kw">minkowski</span>(bd[i,],bd[j,],d)</a>
<a class="sourceLine" id="cb295-10" title="10">    }</a>
<a class="sourceLine" id="cb295-11" title="11">  }</a>
<a class="sourceLine" id="cb295-12" title="12">  <span class="kw">return</span>(DD)</a>
<a class="sourceLine" id="cb295-13" title="13">}</a>
<a class="sourceLine" id="cb295-14" title="14"><span class="kw">distancia</span>(aux,<span class="dt">d=</span><span class="dv">2</span>)</a></code></pre></div>
<pre><code>##          1        2        3        4
## 2 6.242581       NA       NA       NA
## 3 6.169821 5.905550       NA       NA
## 4 7.421876 5.650037 6.655177       NA
## 5 8.148640 6.937412 6.958611 6.116255</code></pre>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb297-1" title="1"><span class="kw">dist</span>(aux)</a></code></pre></div>
<pre><code>##          1        2        3        4
## 2 6.242581                           
## 3 6.169821 5.905550                  
## 4 7.421876 5.650037 6.655177         
## 5 8.148640 6.937412 6.958611 6.116255</code></pre>
</div>
<div id="variables-cualitativas" class="section level3">
<h3><span class="header-section-number">6.1.5</span> Variables cualitativas</h3>
<p>Para las variables cualitativas se debe considerar los casos cuando estas son nominales y ordinales, distinguir tambien los casos de variables binarias.</p>
<div class="sourceCode" id="cb299"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb299-1" title="1"><span class="kw">install.packages</span>(<span class="st">&quot;vegan&quot;</span>)</a>
<a class="sourceLine" id="cb299-2" title="2"><span class="kw">library</span>(vegan)</a></code></pre></div>
</div>
<div id="datos-mixtos" class="section level3">
<h3><span class="header-section-number">6.1.6</span> Datos mixtos</h3>
<p>Una de los mayores desafios es cuando las variables son mixtas, es decir cuantitativas y cualitativas.</p>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb300-1" title="1"><span class="kw">install.packages</span>(<span class="st">&quot;cluster&quot;</span>)</a>
<a class="sourceLine" id="cb300-2" title="2"><span class="kw">library</span>(cluster)</a></code></pre></div>
</div>
</div>
<div id="métodos-de-clustering" class="section level2">
<h2><span class="header-section-number">6.2</span> Métodos de clustering</h2>
<ul>
<li>Partición (k-center)</li>
<li>Jerárquicos (dendograma)</li>
<li>Basados en densidad</li>
<li>Basados en cuadrículas (grid)</li>
</ul>
</div>
<div id="k-center-clustering-no-jerárquicos" class="section level2">
<h2><span class="header-section-number">6.3</span> K-center Clustering (no jerárquicos)</h2>
<p>Algoritmo</p>
<ol style="list-style-type: decimal">
<li>Partición de las observaciones en <span class="math inline">\(k\)</span> grupos, obtener el vector de promedios de cada grupo (centroides). Se puede trabajar con la media o la mediana.</li>
<li>Para cada observación calcular las distancia euclideana a los centroides y reasignar lo observación en base a la menor distancia, recalcular los centroides en base a la reasignación de cada observación</li>
<li>Repetir el paso 2 hasta que que ya no existan más reasignaciones</li>
</ol>
<div class="sourceCode" id="cb301"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb301-1" title="1">bd&lt;-<span class="kw">data.frame</span>(<span class="dt">x=</span><span class="kw">rnorm</span>(<span class="dv">100</span>),<span class="dt">y=</span><span class="kw">rnorm</span>(<span class="dv">100</span>))</a>
<a class="sourceLine" id="cb301-2" title="2"><span class="kw">kmeans</span>(bd,<span class="dv">2</span>)</a></code></pre></div>
<pre><code>## K-means clustering with 2 clusters of sizes 55, 45
## 
## Cluster means:
##             x          y
## 1 -0.07555803  0.8703558
## 2  0.01139670 -0.8657928
## 
## Clustering vector:
##   [1] 1 2 1 2 2 2 1 1 1 1 1 1 2 1 2 1 1 2 2 2 2 1 1 2 2 1 1
##  [28] 1 2 1 1 2 2 1 2 2 1 1 1 1 2 1 1 2 2 2 2 2 1 1 1 2 1 1
##  [55] 1 2 1 2 1 2 1 2 2 2 1 1 1 1 1 1 2 1 1 1 1 2 2 1 1 1 2
##  [82] 2 1 2 2 2 1 2 2 2 1 2 2 1 2 1 1 1 1 2
## 
## Within cluster sum of squares by cluster:
## [1] 69.38505 60.62999
##  (between_SS / total_SS =  36.5 %)
## 
## Available components:
## 
## [1] &quot;cluster&quot;      &quot;centers&quot;      &quot;totss&quot;       
## [4] &quot;withinss&quot;     &quot;tot.withinss&quot; &quot;betweenss&quot;   
## [7] &quot;size&quot;         &quot;iter&quot;         &quot;ifault&quot;</code></pre>
<p>Ejemplo:</p>
<ul>
<li>Implementar el algoritmo para el k-center, con la distancia de Minkowski y para la media y mediana.</li>
</ul>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb303-1" title="1"><span class="co">#Nota: La entrada de la funcion es un data frame</span></a>
<a class="sourceLine" id="cb303-2" title="2">kcenter&lt;-<span class="cf">function</span>(bd,<span class="dt">k=</span><span class="dv">3</span>,<span class="dt">d=</span><span class="dv">2</span>,<span class="dt">tipo=</span><span class="st">&quot;media&quot;</span>,<span class="dt">seed=</span><span class="dv">123456</span>){</a>
<a class="sourceLine" id="cb303-3" title="3">  nf&lt;-<span class="kw">dim</span>(bd)[<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb303-4" title="4">  nc&lt;-<span class="kw">dim</span>(bd)[<span class="dv">2</span>]</a>
<a class="sourceLine" id="cb303-5" title="5">  <span class="co">#paso1: asignar las k (nf&gt;=k)</span></a>
<a class="sourceLine" id="cb303-6" title="6">  <span class="kw">set.seed</span>(seed)</a>
<a class="sourceLine" id="cb303-7" title="7">  bd<span class="op">$</span>k&lt;-<span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span>k,nf,<span class="dt">replace=</span>T)</a>
<a class="sourceLine" id="cb303-8" title="8">  centroide&lt;-<span class="ot">NULL</span></a>
<a class="sourceLine" id="cb303-9" title="9">  <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>k){</a>
<a class="sourceLine" id="cb303-10" title="10">    <span class="cf">if</span>(tipo<span class="op">==</span><span class="st">&quot;media&quot;</span>){  </a>
<a class="sourceLine" id="cb303-11" title="11">      centroide&lt;-<span class="kw">rbind</span>(centroide,<span class="kw">apply</span>(bd[bd<span class="op">$</span>k<span class="op">==</span>i,],<span class="dv">2</span>, mean))</a>
<a class="sourceLine" id="cb303-12" title="12">    } <span class="cf">else</span> <span class="cf">if</span>(tipo<span class="op">==</span><span class="st">&quot;mediana&quot;</span>){</a>
<a class="sourceLine" id="cb303-13" title="13">      centroide&lt;-<span class="kw">rbind</span>(centroide,<span class="kw">apply</span>(bd[bd<span class="op">$</span>k<span class="op">==</span>i,],<span class="dv">2</span>, median))</a>
<a class="sourceLine" id="cb303-14" title="14">    }</a>
<a class="sourceLine" id="cb303-15" title="15">  }</a>
<a class="sourceLine" id="cb303-16" title="16">  <span class="co">#paso2 (recalcular loo centroides al final)</span></a>
<a class="sourceLine" id="cb303-17" title="17">  cc&lt;-<span class="dv">1</span></a>
<a class="sourceLine" id="cb303-18" title="18">  <span class="cf">while</span>(cc<span class="op">!=</span><span class="dv">0</span>){ <span class="co">#paso3</span></a>
<a class="sourceLine" id="cb303-19" title="19">    cc&lt;-<span class="dv">0</span></a>
<a class="sourceLine" id="cb303-20" title="20">    <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>nf){</a>
<a class="sourceLine" id="cb303-21" title="21">      auxd&lt;-<span class="ot">NULL</span></a>
<a class="sourceLine" id="cb303-22" title="22">      <span class="cf">for</span>(j <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>k){</a>
<a class="sourceLine" id="cb303-23" title="23">        auxd&lt;-<span class="kw">c</span>(auxd,<span class="kw">minkowski</span>(bd[i,<span class="dv">1</span><span class="op">:</span>nc],centroide[j,<span class="dv">1</span><span class="op">:</span>nc],<span class="dt">d=</span>d))</a>
<a class="sourceLine" id="cb303-24" title="24">      }</a>
<a class="sourceLine" id="cb303-25" title="25">      newk&lt;-<span class="kw">which</span>(auxd<span class="op">==</span><span class="kw">min</span>(auxd))</a>
<a class="sourceLine" id="cb303-26" title="26">        <span class="cf">if</span>(newk<span class="op">!=</span>bd<span class="op">$</span>k[i]){</a>
<a class="sourceLine" id="cb303-27" title="27">          bd<span class="op">$</span>k[i] &lt;-<span class="st"> </span>newk</a>
<a class="sourceLine" id="cb303-28" title="28">          cc&lt;-cc<span class="op">+</span><span class="dv">1</span></a>
<a class="sourceLine" id="cb303-29" title="29">        }</a>
<a class="sourceLine" id="cb303-30" title="30">    }</a>
<a class="sourceLine" id="cb303-31" title="31">    centroide&lt;-<span class="ot">NULL</span></a>
<a class="sourceLine" id="cb303-32" title="32">    <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>k){</a>
<a class="sourceLine" id="cb303-33" title="33">      <span class="cf">if</span>(tipo<span class="op">==</span><span class="st">&quot;media&quot;</span>){  </a>
<a class="sourceLine" id="cb303-34" title="34">        centroide&lt;-<span class="kw">rbind</span>(centroide,<span class="kw">apply</span>(bd[bd<span class="op">$</span>k<span class="op">==</span>i,],<span class="dv">2</span>, mean))</a>
<a class="sourceLine" id="cb303-35" title="35">      } <span class="cf">else</span> <span class="cf">if</span>(tipo<span class="op">==</span><span class="st">&quot;mediana&quot;</span>){</a>
<a class="sourceLine" id="cb303-36" title="36">        centroide&lt;-<span class="kw">rbind</span>(centroide,<span class="kw">apply</span>(bd[bd<span class="op">$</span>k<span class="op">==</span>i,],<span class="dv">2</span>, median))</a>
<a class="sourceLine" id="cb303-37" title="37">      }</a>
<a class="sourceLine" id="cb303-38" title="38">    }</a>
<a class="sourceLine" id="cb303-39" title="39">  }</a>
<a class="sourceLine" id="cb303-40" title="40">  <span class="kw">return</span>(bd)</a>
<a class="sourceLine" id="cb303-41" title="41">}</a></code></pre></div>
<ul>
<li>Pensar en un gráfico que permita ver como se asignaron los cluster</li>
</ul>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb304-1" title="1">bd&lt;-<span class="kw">data.frame</span>(<span class="dt">x=</span><span class="kw">rnorm</span>(<span class="dv">100</span>),<span class="dt">y=</span><span class="kw">rnorm</span>(<span class="dv">100</span>),<span class="dt">z=</span><span class="kw">rnorm</span>(<span class="dv">100</span>))</a>
<a class="sourceLine" id="cb304-2" title="2"><span class="kw">kcenter</span>(bd,<span class="dt">k=</span><span class="dv">4</span>,<span class="dt">d=</span><span class="dv">1</span>,<span class="dt">tipo=</span><span class="st">&quot;mediana&quot;</span>)</a></code></pre></div>
<pre><code>##               x           y            z k
## 1    0.27669036 -0.33023287 -0.182308275 1
## 2   -0.36363721 -0.62533515 -0.292971749 1
## 3    0.22653760  0.09826744 -0.322856532 4
## 4   -1.35516301  0.19852078 -0.916483212 2
## 5   -0.53001504 -1.21601116 -0.467007307 1
## 6    1.57684495 -1.15134934  0.134507196 1
## 7   -1.57258273 -1.08307328  2.092945303 2
## 8    1.50150607  1.53383183  0.313420152 4
## 9   -1.43657161 -0.48402683 -1.062209874 2
## 10   1.59955665 -1.22277267  0.185935119 1
## 11  -1.22133316 -2.47064411 -1.407784734 2
## 12  -1.27960524 -0.34018553 -0.146012106 2
## 13  -0.21225742 -0.49574345 -3.689707577 4
## 14   1.00855955 -0.78695172 -0.910867508 1
## 15  -0.98206761 -2.22860898 -0.899377460 1
## 16   0.85935866 -0.14985687 -0.604637108 4
## 17  -2.06962897  0.03025098 -0.035568357 2
## 18   1.93198504  0.86869101 -2.706757279 4
## 19  -1.29135682 -0.96021692  0.784708581 2
## 20   0.70287342  0.65096645 -0.683876580 4
## 21   1.13862070 -0.02214892 -0.889141178 4
## 22   0.85854736  2.45459176 -1.795483597 4
## 23   0.28542858  1.55824128 -0.138020043 4
## 24  -0.66757668  0.61203257  0.596192616 3
## 25  -0.99925547 -0.58577793 -0.979375899 2
## 26  -0.14162195 -2.15765161 -0.812453881 1
## 27  -0.37004378 -1.54321510  0.868613636 3
## 28  -1.31161452 -0.08227165 -0.175111401 2
## 29   0.42964828 -1.27220228  0.459834822 1
## 30   0.80027513 -0.64860873 -1.186514549 1
## 31   0.26489162 -0.37942645  1.090242783 3
## 32  -0.26594440  0.40652464 -0.276746318 4
## 33  -0.46560741 -0.67054896  0.371944952 2
## 34   0.63168444 -1.61981116 -0.313768710 1
## 35   0.42116593 -1.12582045  0.490063972 1
## 36   1.24109021  0.56360236  0.067687849 4
## 37  -0.75763500  2.14221926 -0.867264616 4
## 38   2.37246148  0.51122314 -0.483298804 4
## 39   0.41168685 -0.31360290  1.715886735 3
## 40  -2.21799602 -0.71218927  0.874088089 2
## 41  -0.79376825 -1.28204651  0.193758410 2
## 42   1.12127833 -1.75811652  0.229871143 1
## 43   0.03790418 -0.43924031 -0.530516572 4
## 44  -0.42451470 -0.89869048  0.185204427 2
## 45  -1.05826737 -0.26691194  2.188375165 3
## 46   0.16209436  0.33134914 -0.761797524 4
## 47   0.07915506 -0.39593285  0.287434814 3
## 48  -0.01181382  0.36150153 -0.567883799 4
## 49   1.00788063  0.38001505  0.740274231 3
## 50  -0.31439258 -0.23602554  0.436734017 3
## 51  -1.37934424 -1.55407012  0.991655177 2
## 52  -1.32389252 -1.99640347  0.212160094 2
## 53  -0.03970377 -0.69144239  1.429667203 3
## 54   1.49375911 -1.45142587  0.007029017 1
## 55   0.17070098 -1.45546759 -0.762065541 1
## 56  -0.47429875  0.47146808  0.924196727 3
## 57   0.49125735  0.55051658  0.869882923 3
## 58   0.36379880  0.12286431 -0.761224919 4
## 59   1.31791383  0.41656361  1.289262152 3
## 60   1.84799751  0.51466825  0.335667460 4
## 61   0.37577939  0.49804781 -1.521101071 4
## 62  -1.64902303 -0.06766412  0.208806726 2
## 63   1.01036385  0.32747141  0.086365777 4
## 64   0.93489512 -1.16676857 -0.858931079 1
## 65  -0.93802386  0.79553787 -1.455028045 4
## 66   0.21933882 -0.30491395  0.861988314 3
## 67  -0.25213220 -1.10592771 -0.682943702 1
## 68  -2.36406416  0.14527147  0.316851169 2
## 69   1.34363009 -0.34017557 -0.224303808 1
## 70   0.41407176 -0.34464782 -2.188780854 4
## 71   0.74889927  0.96512551  0.752482847 3
## 72   0.63574998  0.85593416 -0.267249075 4
## 73  -1.71261771 -0.40715455 -0.465643799 2
## 74  -0.78548345 -0.38646834  0.990040242 3
## 75   0.30341992 -0.27092902 -0.136378520 4
## 76  -0.66379863 -0.12527590  1.018347486 3
## 77   0.48326460 -1.71974707 -1.915803597 1
## 78   1.41470171 -1.71731094  1.219462540 1
## 79  -0.80264922 -0.89416210  0.453414024 2
## 80  -0.01405238 -0.05285257 -1.018054072 4
## 81  -0.18698231 -0.82608651  0.917479801 3
## 82  -1.26463300 -0.18041670 -1.182174939 2
## 83   2.51558506 -0.04162576 -0.519473402 4
## 84   0.40286042  0.18124658 -1.058258269 4
## 85  -1.79779168 -0.40642323  0.823586483 2
## 86   1.14797570  0.65721550 -0.101344042 4
## 87   0.48281128 -1.31582759  0.267754523 1
## 88   1.01081371  0.58739571 -0.750755841 4
## 89  -0.97243459 -1.61881403  0.053949446 2
## 90   1.10150329 -0.67440017  0.887355932 3
## 91  -0.76777221  0.23944636  0.638883950 3
## 92  -0.11006357 -1.75607212  1.003274568 3
## 93  -0.62135859  0.09484861  0.736168767 3
## 94   0.64905049 -1.07217609 -0.305904713 1
## 95   0.39927268 -0.47920212 -1.640651989 4
## 96  -1.49031367  0.48495405  0.704240573 2
## 97  -0.98679532  0.19318356  0.610692844 2
## 98  -1.81072224  0.13904026  0.544279099 2
## 99   0.54205734 -1.91537419 -0.408845479 1
## 100 -0.04213420  0.35103049  0.637055236 3</code></pre>
<div id="validación-cluster" class="section level3">
<h3><span class="header-section-number">6.3.1</span> Validación cluster</h3>
<ul>
<li>La estructura de los cluster es aleatoria (¿funciona?)</li>
<li>¿Cómo definimos el valor de <span class="math inline">\(K\)</span>?</li>
</ul>
<blockquote>
<p>Silhouette coefficient:</p>
</blockquote>
<ol style="list-style-type: decimal">
<li>Se obtiene para la observación <span class="math inline">\(i\)</span> el promedio de distancia a todos los objetos en el mismo cluster (<span class="math inline">\(a_i\)</span>)</li>
<li>Se obtiene para la observación <span class="math inline">\(i\)</span> el promedio de distancia a todos los objetos de los otros clusters (<span class="math inline">\(b_i\)</span>)</li>
<li>Se define a <span class="math inline">\(s_i\)</span> como el coeficiente, con un recorrido entre <span class="math inline">\([-1,1]\)</span>, para cada observación <span class="math inline">\(i\)</span></li>
</ol>
<p><span class="math display">\[s_i=\frac{b_i-a_i}{max(a_i,b_i)}\]</span></p>
<p>Idealmente se espera que <span class="math inline">\(a_i &lt; b_i\)</span> y los <span class="math inline">\(a_i\)</span> cercanos a <span class="math inline">\(0\)</span>.</p>
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb306-1" title="1"><span class="kw">library</span>(cluster)</a>
<a class="sourceLine" id="cb306-2" title="2">kk&lt;-<span class="kw">kmeans</span>(bd,<span class="dv">3</span>)</a>
<a class="sourceLine" id="cb306-3" title="3">s &lt;-<span class="st"> </span><span class="kw">silhouette</span>(kk<span class="op">$</span>cluster, <span class="kw">dist</span>(bd))</a>
<a class="sourceLine" id="cb306-4" title="4"><span class="kw">plot</span>(s)</a></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-37-1.png" width="672" /></p>
<div class="sourceCode" id="cb307"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb307-1" title="1"><span class="co">#sobre la base IRIS</span></a>
<a class="sourceLine" id="cb307-2" title="2"><span class="kw">data</span>(<span class="st">&quot;iris&quot;</span>)</a>
<a class="sourceLine" id="cb307-3" title="3">aux&lt;-<span class="kw">kmeans</span>(iris[,<span class="op">-</span><span class="dv">5</span>],<span class="dv">3</span>)</a>
<a class="sourceLine" id="cb307-4" title="4">s &lt;-<span class="st"> </span><span class="kw">silhouette</span>(aux<span class="op">$</span>cluster, <span class="kw">dist</span>(iris[,<span class="op">-</span><span class="dv">5</span>]))</a>
<a class="sourceLine" id="cb307-5" title="5"><span class="kw">plot</span>(s)</a></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-37-2.png" width="672" /></p>
<blockquote>
<p>Medoide: es el punto de datos que es “menos diferente” de todos los otros puntos de datos. A diferencia del centroide, el medoide tiene que ser uno de los puntos originales.</p>
</blockquote>
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb308-1" title="1"><span class="kw">pam</span>(bd,<span class="dt">k=</span><span class="dv">3</span>)</a></code></pre></div>
<pre><code>## Medoids:
##      ID          x          y          z
## [1,] 94  0.6490505 -1.0721761 -0.3059047
## [2,] 79 -0.8026492 -0.8941621  0.4534140
## [3,] 20  0.7028734  0.6509665 -0.6838766
## Clustering vector:
##   [1] 1 2 3 2 2 1 2 3 2 1 2 2 3 1 2 3 2 3 2 3 3 3 3 2 2 1 2
##  [28] 2 1 1 2 3 2 1 1 3 3 3 2 2 2 1 1 2 2 3 2 3 3 2 2 2 2 1
##  [55] 1 2 3 3 3 3 3 2 3 1 3 2 1 2 1 3 3 3 2 2 1 2 1 1 2 3 2
##  [82] 2 3 3 2 3 1 3 2 1 2 2 2 1 1 2 2 2 1 2
## Objective function:
##    build     swap 
## 1.223804 1.186708 
## 
## Available components:
##  [1] &quot;medoids&quot;    &quot;id.med&quot;     &quot;clustering&quot; &quot;objective&quot; 
##  [5] &quot;isolation&quot;  &quot;clusinfo&quot;   &quot;silinfo&quot;    &quot;diss&quot;      
##  [9] &quot;call&quot;       &quot;data&quot;</code></pre>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb310-1" title="1"><span class="kw">kmeans</span>(bd,<span class="dv">3</span>)</a></code></pre></div>
<pre><code>## K-means clustering with 3 clusters of sizes 35, 42, 23
## 
## Cluster means:
##           x          y          z
## 1  0.928491 -0.4417488  0.2033525
## 2 -1.007678 -0.6488285  0.2772653
## 3  0.349137  0.3352690 -1.1736293
## 
## Clustering vector:
##   [1] 1 2 3 2 2 1 2 1 2 1 2 2 3 1 2 1 2 3 2 3 3 3 3 2 2 2 2
##  [28] 2 1 3 1 3 2 1 1 1 3 1 1 2 2 1 3 2 2 3 1 3 1 2 2 2 2 1
##  [55] 1 2 1 3 1 1 3 2 1 1 3 1 2 2 1 3 1 3 2 2 1 2 3 1 2 3 2
##  [82] 2 1 3 2 1 1 3 2 1 2 2 2 1 3 2 2 2 1 1
## 
## Within cluster sum of squares by cluster:
## [1] 54.31490 68.88151 42.72034
##  (between_SS / total_SS =  43.2 %)
## 
## Available components:
## 
## [1] &quot;cluster&quot;      &quot;centers&quot;      &quot;totss&quot;       
## [4] &quot;withinss&quot;     &quot;tot.withinss&quot; &quot;betweenss&quot;   
## [7] &quot;size&quot;         &quot;iter&quot;         &quot;ifault&quot;</code></pre>
<ul>
<li>¿Cúal es el número óptimo de <span class="math inline">\(k\)</span>?</li>
</ul>
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb312-1" title="1"><span class="kw">library</span>(fpc)<span class="co"># Flexible Procedures for Clustering</span></a>
<a class="sourceLine" id="cb312-2" title="2">sol &lt;-<span class="st"> </span><span class="kw">pamk</span>(iris[,<span class="op">-</span><span class="dv">5</span>], <span class="dt">krange=</span><span class="dv">2</span><span class="op">:</span><span class="dv">10</span>, <span class="dt">criterion=</span><span class="st">&quot;asw&quot;</span>, <span class="dt">usepam=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb312-3" title="3">sol</a></code></pre></div>
<pre><code>## $pamobject
## Medoids:
##       ID Sepal.Length Sepal.Width Petal.Length Petal.Width
## [1,]   8          5.0         3.4          1.5         0.2
## [2,] 127          6.2         2.8          4.8         1.8
## Clustering vector:
##   [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
##  [28] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 2 2 2
##  [55] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2
##  [82] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 1 2 2 2 2 2 2 2 2 2
## [109] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2
## [136] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2
## Objective function:
##     build      swap 
## 0.9901187 0.8622026 
## 
## Available components:
##  [1] &quot;medoids&quot;    &quot;id.med&quot;     &quot;clustering&quot; &quot;objective&quot; 
##  [5] &quot;isolation&quot;  &quot;clusinfo&quot;   &quot;silinfo&quot;    &quot;diss&quot;      
##  [9] &quot;call&quot;       &quot;data&quot;      
## 
## $nc
## [1] 2
## 
## $crit
##  [1] 0.0000000 0.6857882 0.5528190 0.4896972 0.4867481
##  [6] 0.4703951 0.3390116 0.3318516 0.2918520 0.2918482</code></pre>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb314-1" title="1"><span class="kw">pamk</span>(bd,<span class="dt">krange=</span><span class="dv">2</span><span class="op">:</span><span class="dv">10</span>,<span class="dt">usepam =</span> T)</a></code></pre></div>
<pre><code>## $pamobject
## Medoids:
##      ID          x          y          z
## [1,] 16  0.8593587 -0.1498569 -0.6046371
## [2,] 33 -0.4656074 -0.6705490  0.3719450
## Clustering vector:
##   [1] 1 2 1 2 2 1 2 1 2 1 2 2 1 1 2 1 2 1 2 1 1 1 1 2 2 2 2
##  [28] 2 2 1 2 2 2 1 2 1 1 1 2 2 2 1 1 2 2 1 2 1 1 2 2 2 2 1
##  [55] 1 2 2 1 1 1 1 2 1 1 1 2 2 2 1 1 1 1 2 2 1 2 1 2 2 1 2
##  [82] 2 1 1 2 1 2 1 2 1 2 2 2 1 1 2 2 2 2 2
## Objective function:
##    build     swap 
## 1.353764 1.316508 
## 
## Available components:
##  [1] &quot;medoids&quot;    &quot;id.med&quot;     &quot;clustering&quot; &quot;objective&quot; 
##  [5] &quot;isolation&quot;  &quot;clusinfo&quot;   &quot;silinfo&quot;    &quot;diss&quot;      
##  [9] &quot;call&quot;       &quot;data&quot;      
## 
## $nc
## [1] 2
## 
## $crit
##  [1] 0.0000000 0.2679529 0.2463244 0.2202041 0.2390918
##  [6] 0.2566844 0.2591171 0.2320598 0.2395499 0.2109607</code></pre>
</div>
<div id="distancias-para-variables-nominales-todas-nominales" class="section level3">
<h3><span class="header-section-number">6.3.2</span> Distancias para variables nominales (todas nominales)</h3>
<p>En este caso la mejor estrategia es llevar las variables con sus categorias a variables binarias. Existen múltiples medidas de distancia para variables binarias, muchas de estas medidas son aproximaciones a las medidas mas conocidas. Entre ellas:</p>
<p>Sean las filas <span class="math inline">\(i\)</span>, <span class="math inline">\(j\)</span> que contienen los valores binarios de las variables de estudio. Sea <span class="math inline">\(A\)</span> el total de <span class="math inline">\(1\)</span> que existe en <span class="math inline">\(i\)</span>, <span class="math inline">\(B\)</span> el total de <span class="math inline">\(1\)</span> que existe en <span class="math inline">\(j\)</span> y sea <span class="math inline">\(J\)</span> el total de casos en los que los <span class="math inline">\(1\)</span> ocurren simultaneamente en <span class="math inline">\(i\)</span> y <span class="math inline">\(j\)</span>.</p>
<ul>
<li>Euclideana</li>
</ul>
<p><span class="math display">\[d_{ij}=\sqrt{A+B-2J}\]</span>
* Manhattan</p>
<p><span class="math display">\[d_{ij}=A+B-2J\]</span>
* Bray</p>
<p><span class="math display">\[d_{ij}=\frac{A+B-2J}{A+B}\]</span></p>
<ul>
<li>Binomial</li>
</ul>
<p><span class="math display">\[d_{ij}=log(2)(A+B-2J)\]</span></p>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb316-1" title="1">aux&lt;-<span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>),<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>))</a>
<a class="sourceLine" id="cb316-2" title="2">A&lt;-<span class="kw">sum</span>(aux[<span class="dv">1</span>,])</a>
<a class="sourceLine" id="cb316-3" title="3">B&lt;-<span class="kw">sum</span>(aux[<span class="dv">2</span>,])</a>
<a class="sourceLine" id="cb316-4" title="4">J&lt;-<span class="kw">sum</span>(<span class="kw">apply</span>(aux, <span class="dv">2</span>, sum)<span class="op">==</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb316-5" title="5"><span class="co">#euclideana</span></a>
<a class="sourceLine" id="cb316-6" title="6"><span class="kw">sqrt</span>(A<span class="op">+</span>B<span class="dv">-2</span><span class="op">*</span>J)</a></code></pre></div>
<pre><code>## [1] 1.732051</code></pre>
<div class="sourceCode" id="cb318"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb318-1" title="1"><span class="co">#manhathan</span></a>
<a class="sourceLine" id="cb318-2" title="2">A<span class="op">+</span>B<span class="dv">-2</span><span class="op">*</span>J</a></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb320"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb320-1" title="1"><span class="co">#bray</span></a>
<a class="sourceLine" id="cb320-2" title="2">(A<span class="op">+</span>B<span class="dv">-2</span><span class="op">*</span>J)<span class="op">/</span>(A<span class="op">+</span>B)</a></code></pre></div>
<pre><code>## [1] 0.4285714</code></pre>
<div class="sourceCode" id="cb322"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb322-1" title="1"><span class="co">#binomial</span></a>
<a class="sourceLine" id="cb322-2" title="2"><span class="kw">log</span>(<span class="dv">2</span>)<span class="op">*</span>(A<span class="op">+</span>B<span class="dv">-2</span><span class="op">*</span>J)</a></code></pre></div>
<pre><code>## [1] 2.079442</code></pre>
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb324-1" title="1"><span class="kw">library</span>(vegan)</a></code></pre></div>
<pre><code>## Loading required package: permute</code></pre>
<pre><code>## This is vegan 2.5-6</code></pre>
<div class="sourceCode" id="cb327"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb327-1" title="1"><span class="kw">vegdist</span>(aux,<span class="dt">binary =</span> T)</a></code></pre></div>
<pre><code>##           1
## 2 0.4285714</code></pre>
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb329-1" title="1"><span class="kw">vegdist</span>(aux,<span class="dt">binary =</span> F)</a></code></pre></div>
<pre><code>##           1
## 2 0.4285714</code></pre>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb331-1" title="1"><span class="co">#una base de datos mas grandes</span></a>
<a class="sourceLine" id="cb331-2" title="2"><span class="kw">set.seed</span>(<span class="dv">999</span>)</a>
<a class="sourceLine" id="cb331-3" title="3">aux1&lt;-<span class="kw">matrix</span>(<span class="kw">rbinom</span>(<span class="dv">200</span>,<span class="dv">1</span>,<span class="fl">0.4</span>),<span class="dt">nrow =</span> <span class="dv">20</span>)</a>
<a class="sourceLine" id="cb331-4" title="4"><span class="kw">vegdist</span>(aux1,<span class="dt">method =</span> <span class="st">&quot;binomial&quot;</span>,<span class="dt">binary =</span> T)</a></code></pre></div>
<pre><code>##            1         2         3         4         5
## 2  3.4657359                                        
## 3  3.4657359 2.7725887                              
## 4  2.7725887 4.8520303 4.8520303                    
## 5  4.1588831 3.4657359 4.8520303 2.7725887          
## 6  2.7725887 3.4657359 3.4657359 4.1588831 1.3862944
## 7  3.4657359 2.7725887 2.7725887 2.0794415 3.4657359
## 8  2.0794415 1.3862944 2.7725887 4.8520303 3.4657359
## 9  2.7725887 3.4657359 4.8520303 4.1588831 2.7725887
## 10 2.7725887 4.8520303 3.4657359 2.7725887 2.7725887
## 11 3.4657359 2.7725887 4.1588831 3.4657359 4.8520303
## 12 2.7725887 4.8520303 3.4657359 2.7725887 4.1588831
## 13 4.1588831 4.8520303 3.4657359 2.7725887 2.7725887
## 14 4.8520303 4.1588831 4.1588831 3.4657359 3.4657359
## 15 1.3862944 3.4657359 2.0794415 2.7725887 4.1588831
## 16 3.4657359 4.1588831 5.5451774 2.0794415 0.6931472
## 17 3.4657359 2.7725887 4.1588831 3.4657359 3.4657359
## 18 2.7725887 4.8520303 3.4657359 4.1588831 4.1588831
## 19 3.4657359 4.1588831 1.3862944 4.8520303 3.4657359
## 20 4.8520303 2.7725887 4.1588831 3.4657359 3.4657359
##            6         7         8         9        10
## 2                                                   
## 3                                                   
## 4                                                   
## 5                                                   
## 6                                                   
## 7  4.8520303                                        
## 8  2.0794415 4.1588831                              
## 9  1.3862944 6.2383246 2.0794415                    
## 10 2.7725887 3.4657359 3.4657359 2.7725887          
## 11 4.8520303 2.7725887 4.1588831 3.4657359 3.4657359
## 12 2.7725887 3.4657359 4.8520303 2.7725887 2.7725887
## 13 2.7725887 4.8520303 4.8520303 2.7725887 2.7725887
## 14 3.4657359 4.1588831 4.1588831 2.0794415 2.0794415
## 15 2.7725887 3.4657359 2.0794415 2.7725887 1.3862944
## 16 2.0794415 4.1588831 4.1588831 2.0794415 2.0794415
## 17 3.4657359 5.5451774 2.7725887 2.0794415 4.8520303
## 18 4.1588831 3.4657359 4.8520303 4.1588831 2.7725887
## 19 2.0794415 4.1588831 2.7725887 3.4657359 2.0794415
## 20 3.4657359 4.1588831 4.1588831 2.0794415 3.4657359
##           11        12        13        14        15
## 2                                                   
## 3                                                   
## 4                                                   
## 5                                                   
## 6                                                   
## 7                                                   
## 8                                                   
## 9                                                   
## 10                                                  
## 11                                                  
## 12 2.0794415                                        
## 13 3.4657359 2.7725887                              
## 14 2.7725887 2.0794415 3.4657359                    
## 15 3.4657359 2.7725887 2.7725887 3.4657359          
## 16 4.1588831 3.4657359 2.0794415 2.7725887 3.4657359
## 17 4.1588831 4.8520303 2.0794415 4.1588831 3.4657359
## 18 3.4657359 2.7725887 4.1588831 3.4657359 4.1588831
## 19 4.1588831 3.4657359 2.0794415 4.1588831 2.0794415
## 20 1.3862944 2.0794415 2.0794415 1.3862944 3.4657359
##           16        17        18        19
## 2                                         
## 3                                         
## 4                                         
## 5                                         
## 6                                         
## 7                                         
## 8                                         
## 9                                         
## 10                                        
## 11                                        
## 12                                        
## 13                                        
## 14                                        
## 15                                        
## 16                                        
## 17 2.7725887                              
## 18 3.4657359 4.8520303                    
## 19 4.1588831 4.1588831 3.4657359          
## 20 2.7725887 2.7725887 4.8520303 4.1588831</code></pre>
<div class="sourceCode" id="cb333"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb333-1" title="1"><span class="kw">dist</span>(aux1)</a></code></pre></div>
<pre><code>##           1        2        3        4        5        6
## 2  2.236068                                             
## 3  2.236068 2.000000                                    
## 4  2.000000 2.645751 2.645751                           
## 5  2.449490 2.236068 2.645751 2.000000                  
## 6  2.000000 2.236068 2.236068 2.449490 1.414214         
## 7  2.236068 2.000000 2.000000 1.732051 2.236068 2.645751
## 8  1.732051 1.414214 2.000000 2.645751 2.236068 1.732051
## 9  2.000000 2.236068 2.645751 2.449490 2.000000 1.414214
## 10 2.000000 2.645751 2.236068 2.000000 2.000000 2.000000
## 11 2.236068 2.000000 2.449490 2.236068 2.645751 2.645751
## 12 2.000000 2.645751 2.236068 2.000000 2.449490 2.000000
## 13 2.449490 2.645751 2.236068 2.000000 2.000000 2.000000
## 14 2.645751 2.449490 2.449490 2.236068 2.236068 2.236068
## 15 1.414214 2.236068 1.732051 2.000000 2.449490 2.000000
## 16 2.236068 2.449490 2.828427 1.732051 1.000000 1.732051
## 17 2.236068 2.000000 2.449490 2.236068 2.236068 2.236068
## 18 2.000000 2.645751 2.236068 2.449490 2.449490 2.449490
## 19 2.236068 2.449490 1.414214 2.645751 2.236068 1.732051
## 20 2.645751 2.000000 2.449490 2.236068 2.236068 2.236068
##           7        8        9       10       11       12
## 2                                                       
## 3                                                       
## 4                                                       
## 5                                                       
## 6                                                       
## 7                                                       
## 8  2.449490                                             
## 9  3.000000 1.732051                                    
## 10 2.236068 2.236068 2.000000                           
## 11 2.000000 2.449490 2.236068 2.236068                  
## 12 2.236068 2.645751 2.000000 2.000000 1.732051         
## 13 2.645751 2.645751 2.000000 2.000000 2.236068 2.000000
## 14 2.449490 2.449490 1.732051 1.732051 2.000000 1.732051
## 15 2.236068 1.732051 2.000000 1.414214 2.236068 2.000000
## 16 2.449490 2.449490 1.732051 1.732051 2.449490 2.236068
## 17 2.828427 2.000000 1.732051 2.645751 2.449490 2.645751
## 18 2.236068 2.645751 2.449490 2.000000 2.236068 2.000000
## 19 2.449490 2.000000 2.236068 1.732051 2.449490 2.236068
## 20 2.449490 2.449490 1.732051 2.236068 1.414214 1.732051
##          13       14       15       16       17       18
## 2                                                       
## 3                                                       
## 4                                                       
## 5                                                       
## 6                                                       
## 7                                                       
## 8                                                       
## 9                                                       
## 10                                                      
## 11                                                      
## 12                                                      
## 13                                                      
## 14 2.236068                                             
## 15 2.000000 2.236068                                    
## 16 1.732051 2.000000 2.236068                           
## 17 1.732051 2.449490 2.236068 2.000000                  
## 18 2.449490 2.236068 2.449490 2.236068 2.645751         
## 19 1.732051 2.449490 1.732051 2.449490 2.449490 2.236068
## 20 1.732051 1.414214 2.236068 2.000000 2.000000 2.645751
##          19
## 2          
## 3          
## 4          
## 5          
## 6          
## 7          
## 8          
## 9          
## 10         
## 11         
## 12         
## 13         
## 14         
## 15         
## 16         
## 17         
## 18         
## 19         
## 20 2.449490</code></pre>
</div>
<div id="distancias-para-variables-mixtas-cuantitativas-nominales-ordinales" class="section level3">
<h3><span class="header-section-number">6.3.3</span> Distancias para variables mixtas (cuantitativas, nominales, ordinales)</h3>
<div class="sourceCode" id="cb335"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb335-1" title="1"><span class="kw">library</span>(cluster)</a>
<a class="sourceLine" id="cb335-2" title="2"><span class="kw">data</span>(<span class="st">&quot;flower&quot;</span>)</a>
<a class="sourceLine" id="cb335-3" title="3"><span class="kw">str</span>(flower)</a></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    18 obs. of  8 variables:
##  $ V1: Factor w/ 2 levels &quot;0&quot;,&quot;1&quot;: 1 2 1 1 1 1 1 1 2 2 ...
##  $ V2: Factor w/ 2 levels &quot;0&quot;,&quot;1&quot;: 2 1 2 1 2 2 1 1 2 2 ...
##  $ V3: Factor w/ 2 levels &quot;0&quot;,&quot;1&quot;: 2 1 1 2 1 1 1 2 1 1 ...
##  $ V4: Factor w/ 5 levels &quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,..: 4 2 3 4 5 4 4 2 3 5 ...
##  $ V5: Ord.factor w/ 3 levels &quot;1&quot;&lt;&quot;2&quot;&lt;&quot;3&quot;: 3 1 3 2 2 3 3 2 1 2 ...
##  $ V6: Ord.factor w/ 18 levels &quot;1&quot;&lt;&quot;2&quot;&lt;&quot;3&quot;&lt;&quot;4&quot;&lt;..: 15 3 1 16 2 12 13 7 4 14 ...
##  $ V7: num  25 150 150 125 20 50 40 100 25 100 ...
##  $ V8: num  15 50 50 50 15 40 20 15 15 60 ...</code></pre>
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb337-1" title="1">dd&lt;-<span class="kw">daisy</span>(flower,<span class="dt">metric =</span> <span class="st">&quot;gower&quot;</span>)</a>
<a class="sourceLine" id="cb337-2" title="2"><span class="kw">summary</span>(dd)</a></code></pre></div>
<pre><code>## 153 dissimilarities, summarized :
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##  0.1418  0.3904  0.4829  0.4865  0.5865  0.8875 
## Metric :  mixed ;  Types = N, N, N, N, O, O, I, I 
## Number of objects : 18</code></pre>
<p>Ejercicios</p>
<ol style="list-style-type: decimal">
<li>Busque funciones en R que permitan calcular los k-center para variables mixtas y medoides</li>
<li>Crear una función k-center para variables mixtas y alternativas para incluir el medoide.</li>
</ol>
</div>
</div>
<div id="cluster-jerárquico" class="section level2">
<h2><span class="header-section-number">6.4</span> Cluster Jerárquico</h2>
<p>El objetivo es obtener una jerarquía de posibles soluciones que van desde un solo grupo a <span class="math inline">\(n\)</span> grupos, donde <span class="math inline">\(n\)</span> es el número de observaciones en el conjunto de datos.</p>
<div id="algoritmo-johnson" class="section level3">
<h3><span class="header-section-number">6.4.1</span> Algoritmo (Johnson)</h3>
<ol style="list-style-type: decimal">
<li>Se inicia con <span class="math inline">\(n\)</span> grupos y se genera una matriz de <span class="math inline">\(nxn\)</span> de distancias, <span class="math inline">\(D=\{d_{ik}\}\)</span></li>
<li>Buscar en la matriz de distancia los pares de cluster más cercanos entre ellos, “los cluster mas similares”, si defifinimos los clusters <span class="math inline">\(V\)</span> y <span class="math inline">\(U\)</span>, estamos interesados en encontrar <span class="math inline">\(d_{UV}\)</span></li>
<li>Unir los cluster <span class="math inline">\(U\)</span> y <span class="math inline">\(V\)</span>, re etiquetar el nuevo cluster como <span class="math inline">\(UV\)</span>. Actualizar la matriz de distancias a) remover las filas y columnas correspondientes a <span class="math inline">\(U\)</span> y <span class="math inline">\(V\)</span> b) incluimos las nuevas filas y columnas para el nuevo cluster <span class="math inline">\(UV\)</span>.</li>
<li>Repetimos el paso 2 y 3 un total de <span class="math inline">\(n-1\)</span> veces.</li>
</ol>
<p>El momento de definir el cluster más cercano, se puede emplear los siguientes enlaces:</p>
<ul>
<li>Single linkage (Enlace simple): Se elige al cluster más cercano, con la regla de que las distincia individual entre las observaciones dentro de los clusters es la más corta</li>
<li>Complete linkage (Enlace completo): Se elige el cluster mas cercano, con la regla que las distnaicas individuales entre las observaciones dentro de los cluster es la más larga</li>
<li>Average linkage (Enlace promedio): Se elige el cluster mas cercano, considerando el promedio de las distancias entre los cluster.</li>
</ul>
<blockquote>
<p>Nota: Se debe elegir la matriz de distancias acorde a la naturaleza de los datos, se recomienda:</p>
</blockquote>
<ul>
<li>Todas Numéricas: Euclideana o Manhatan</li>
<li>Todas nominales: Transformación a binarias y usar la distancia binomial</li>
<li>Mixtas: Distancia de Gower</li>
</ul>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb339-1" title="1">d &lt;-<span class="st"> </span><span class="kw">dist</span>(<span class="kw">scale</span>(iris[,<span class="op">-</span><span class="dv">5</span>]))<span class="co">#euclideana</span></a>
<a class="sourceLine" id="cb339-2" title="2">h &lt;-<span class="st"> </span><span class="kw">hclust</span>(d)</a>
<a class="sourceLine" id="cb339-3" title="3"><span class="kw">plot</span>(h,<span class="dt">hang=</span><span class="op">-</span><span class="fl">0.1</span>,<span class="dt">labels=</span>iris[[<span class="st">&quot;Species&quot;</span>]],<span class="dt">cex=</span><span class="fl">0.5</span>)</a>
<a class="sourceLine" id="cb339-4" title="4"><span class="co">#elegir la cantidad de grupos</span></a>
<a class="sourceLine" id="cb339-5" title="5">clus3 &lt;-<span class="st"> </span><span class="kw">cutree</span>(h, <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb339-6" title="6"><span class="kw">plot</span>(h,<span class="dt">hang=</span><span class="op">-</span><span class="fl">0.1</span>,<span class="dt">labels=</span>iris[[<span class="st">&quot;Species&quot;</span>]],<span class="dt">cex=</span><span class="fl">0.5</span>)</a>
<a class="sourceLine" id="cb339-7" title="7"><span class="kw">rect.hclust</span>(h,<span class="dt">k=</span><span class="dv">5</span>)</a></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-42-1.png" width="672" /></p>
<p>Probando los tres tipos de enlaces para <span class="math inline">\(k=3\)</span></p>
<div class="sourceCode" id="cb340"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb340-1" title="1">hs &lt;-<span class="st"> </span><span class="kw">hclust</span>(d,<span class="dt">method =</span> <span class="st">&quot;single&quot;</span>)</a>
<a class="sourceLine" id="cb340-2" title="2">hc &lt;-<span class="st"> </span><span class="kw">hclust</span>(d,<span class="dt">method =</span> <span class="st">&quot;complete&quot;</span>)</a>
<a class="sourceLine" id="cb340-3" title="3">ha &lt;-<span class="st"> </span><span class="kw">hclust</span>(d,<span class="dt">method =</span> <span class="st">&quot;average&quot;</span>)</a>
<a class="sourceLine" id="cb340-4" title="4">cs&lt;-<span class="kw">cutree</span>(hs,<span class="dv">3</span>)</a>
<a class="sourceLine" id="cb340-5" title="5">cc&lt;-<span class="kw">cutree</span>(hc,<span class="dv">3</span>)</a>
<a class="sourceLine" id="cb340-6" title="6">ca&lt;-<span class="kw">cutree</span>(ha,<span class="dv">3</span>)</a>
<a class="sourceLine" id="cb340-7" title="7"><span class="kw">table</span>(cs,cc)</a></code></pre></div>
<pre><code>##    cc
## cs   1  2  3
##   1 49  0  0
##   2  0  1  0
##   3  0 23 77</code></pre>
<div class="sourceCode" id="cb342"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb342-1" title="1"><span class="kw">table</span>(cs,ca)</a></code></pre></div>
<pre><code>##    ca
## cs   1  2  3
##   1 49  0  0
##   2  1  0  0
##   3  0 97  3</code></pre>
<div class="sourceCode" id="cb344"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb344-1" title="1"><span class="kw">table</span>(cc,ca)</a></code></pre></div>
<pre><code>##    ca
## cc   1  2  3
##   1 49  0  0
##   2  1 23  0
##   3  0 74  3</code></pre>
<div class="sourceCode" id="cb346"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb346-1" title="1"><span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>))</a>
<a class="sourceLine" id="cb346-2" title="2"><span class="kw">plot</span>(hs,<span class="dt">hang=</span><span class="op">-</span><span class="fl">0.1</span>,<span class="dt">labels=</span>iris[[<span class="st">&quot;Species&quot;</span>]],<span class="dt">cex=</span><span class="fl">0.5</span>)</a>
<a class="sourceLine" id="cb346-3" title="3"><span class="kw">rect.hclust</span>(hs,<span class="dt">k=</span><span class="dv">3</span>)</a>
<a class="sourceLine" id="cb346-4" title="4"><span class="kw">plot</span>(hc,<span class="dt">hang=</span><span class="op">-</span><span class="fl">0.1</span>,<span class="dt">labels=</span>iris[[<span class="st">&quot;Species&quot;</span>]],<span class="dt">cex=</span><span class="fl">0.5</span>)</a>
<a class="sourceLine" id="cb346-5" title="5"><span class="kw">rect.hclust</span>(hc,<span class="dt">k=</span><span class="dv">3</span>)</a>
<a class="sourceLine" id="cb346-6" title="6"><span class="kw">plot</span>(ha,<span class="dt">hang=</span><span class="op">-</span><span class="fl">0.1</span>,<span class="dt">labels=</span>iris[[<span class="st">&quot;Species&quot;</span>]],<span class="dt">cex=</span><span class="fl">0.5</span>)</a>
<a class="sourceLine" id="cb346-7" title="7"><span class="kw">rect.hclust</span>(ha,<span class="dt">k=</span><span class="dv">3</span>)</a></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-43-1.png" width="672" /></p>
<p>Nota: El dendograma es muy útil para ver las relaciones que existen basadas en las distancias y la creación de las jerarquias, a partir de estos se puede definir un <span class="math inline">\(k\)</span> (de forma visual)</p>
<p>Nota: El dendograma pierde su utilidad cuando la cantidad de observaciones es muy alta,</p>
<p>Ejercicio,</p>
<ol style="list-style-type: decimal">
<li>Usar los datos de las elecciones del 20 de octubre, agregar los resultados en términos relativos para los municipios y generar el dendograma para los tres tipos de enlaces, de forma visual sugerir un valor de <span class="math inline">\(k\)</span> para cada tipo de enlace.</li>
</ol>
</div>
</div>
<div id="ejercicios" class="section level2">
<h2><span class="header-section-number">6.5</span> Ejercicios</h2>
<ol style="list-style-type: decimal">
<li>Pensar en un gráfico que permita ver como se asignaron los cluster</li>
<li>Pensar en optimizar el código empleado para el k-center</li>
<li>Hacer que la función desarrollada para el k-center retorne también los centroides</li>
<li>Utilizando la base de datos de las elecciones del 20 de octubre, crear una base de datos a nivel municipal, aplicar el método k-center con medoides para los resultados a nivel municipal y terminar el <span class="math inline">\(k\)</span> óptimo en un rango de <span class="math inline">\(k=2:10\)</span> (Usar datos relativos).</li>
</ol>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="modelado-en-minería-de-datos.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="regresión.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
